/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};function e(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}function r(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s}function n(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{a(n.next(t))}catch(t){o(t)}}function c(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,c)}a((n=n.apply(t,e||[])).next())}))}function i(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}function o(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function c(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t}function a(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=o(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,i,(e=t[r](e)).done,e.value)}))}}}function u(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function l(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const h="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,p=(t,e,r=null)=>{for(;e!==r;){const r=e.nextSibling;t.removeChild(e),e=r}},d=`{{lit-${String(Math.random()).slice(2)}}}`,f=`\x3c!--${d}--\x3e`,v=new RegExp(`${d}|${f}`);class y{constructor(t,e){this.parts=[],this.element=e;const r=[],n=[],i=document.createTreeWalker(e.content,133,null,!1);let o=0,s=-1,c=0;const{strings:a,values:{length:u}}=t;for(;c<u;){const t=i.nextNode();if(null!==t){if(s++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:r}=e;let n=0;for(let t=0;t<r;t++)m(e[t].name,"$lit$")&&n++;for(;n-- >0;){const e=a[c],r=g.exec(e)[2],n=r.toLowerCase()+"$lit$",i=t.getAttribute(n);t.removeAttribute(n);const o=i.split(v);this.parts.push({type:"attribute",index:s,name:r,strings:o}),c+=o.length-1}}"TEMPLATE"===t.tagName&&(n.push(t),i.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(d)>=0){const n=t.parentNode,i=e.split(v),o=i.length-1;for(let e=0;e<o;e++){let r,o=i[e];if(""===o)r=w();else{const t=g.exec(o);null!==t&&m(t[2],"$lit$")&&(o=o.slice(0,t.index)+t[1]+t[2].slice(0,-"$lit$".length)+t[3]),r=document.createTextNode(o)}n.insertBefore(r,t),this.parts.push({type:"node",index:++s})}""===i[o]?(n.insertBefore(w(),t),r.push(t)):t.data=i[o],c+=o}}else if(8===t.nodeType)if(t.data===d){const e=t.parentNode;null!==t.previousSibling&&s!==o||(s++,e.insertBefore(w(),t)),o=s,this.parts.push({type:"node",index:s}),null===t.nextSibling?t.data="":(r.push(t),s--),c++}else{let e=-1;for(;-1!==(e=t.data.indexOf(d,e+1));)this.parts.push({type:"node",index:-1}),c++}}else i.currentNode=n.pop()}for(const t of r)t.parentNode.removeChild(t)}}const m=(t,e)=>{const r=t.length-e.length;return r>=0&&t.slice(r)===e},b=t=>-1!==t.index,w=()=>document.createComment(""),g=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function S(t,e){const{element:{content:r},parts:n}=t,i=document.createTreeWalker(r,133,null,!1);let o=x(n),s=n[o],c=-1,a=0;const u=[];let l=null;for(;i.nextNode();){c++;const t=i.currentNode;for(t.previousSibling===l&&(l=null),e.has(t)&&(u.push(t),null===l&&(l=t)),null!==l&&a++;void 0!==s&&s.index===c;)s.index=null!==l?-1:s.index-a,o=x(n,o),s=n[o]}u.forEach((t=>t.parentNode.removeChild(t)))}const _=t=>{let e=11===t.nodeType?0:1;const r=document.createTreeWalker(t,133,null,!1);for(;r.nextNode();)e++;return e},x=(t,e=-1)=>{for(let r=e+1;r<t.length;r++){const e=t[r];if(b(e))return r}return-1};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const E=new WeakMap,P={},A={};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class C{constructor(t,e,r){this.__parts=[],this.template=t,this.processor=e,this.options=r}update(t){let e=0;for(const r of this.__parts)void 0!==r&&r.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=h?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],r=this.template.parts,n=document.createTreeWalker(t,133,null,!1);let i,o=0,s=0,c=n.nextNode();for(;o<r.length;)if(i=r[o],b(i)){for(;s<i.index;)s++,"TEMPLATE"===c.nodeName&&(e.push(c),n.currentNode=c.content),null===(c=n.nextNode())&&(n.currentNode=e.pop(),c=n.nextNode());if("node"===i.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(c.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(c,i.name,i.strings,this.options));o++}else this.__parts.push(void 0),o++;return h&&(document.adoptNode(t),customElements.upgrade(t)),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const N=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:t=>t}),T=` ${d} `;class k{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(w()),this.endNode=t.appendChild(w())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=w()),t.__insert(this.endNode=w())}insertAfterPart(t){t.__insert(this.startNode=w()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(null===this.startNode.parentNode)return;for(;"function"==typeof(t=this.__pendingValue)&&E.has(t);){const t=this.__pendingValue;this.__pendingValue=P,t(this)}var t;const e=this.__pendingValue;e!==P&&((t=>null===t||!("object"==typeof t||"function"==typeof t))(e)?e!==this.value&&this.__commitText(e):e instanceof class{constructor(t,e,r,n){this.strings=t,this.values=e,this.type=r,this.processor=n}getHTML(){const t=this.strings.length-1;let e="",r=!1;for(let n=0;n<t;n++){const t=this.strings[n],i=t.lastIndexOf("\x3c!--");r=(i>-1||r)&&-1===t.indexOf("--\x3e",i+1);const o=g.exec(t);e+=null===o?t+(r?T:f):t.substr(0,o.index)+o[1]+o[2]+"$lit$"+o[3]+d}return e+=this.strings[t],e}getTemplateElement(){const t=document.createElement("template");let e=this.getHTML();return void 0!==N&&(e=N.createHTML(e)),t.innerHTML=e,t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):(t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]))(e)?this.__commitIterable(e):e===A?(this.value=A,this.clear()):this.__commitText(e))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,r="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=r:this.__commitNode(document.createTextNode(r)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof C&&this.value.template===e)this.value.update(t.values);else{const r=new C(e,t.processor,this.options),n=r._clone();r.update(t.values),this.__commitNode(n),this.value=r}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let r,n=0;for(const i of t)r=e[n],void 0===r&&(r=new k(this.options),e.push(r),0===n?r.appendIntoPart(this):r.insertAfterPart(e[n-1])),r.setValue(i),r.commit(),n++;n<e.length&&(e.length=n,this.clear(r&&r.endNode))}clear(t=this.startNode){p(this.startNode.parentNode,t.nextSibling,this.endNode)}}let U=!1;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
function I(t){let e=O.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},O.set(t.type,e));let r=e.stringsArray.get(t.strings);if(void 0!==r)return r;const n=t.strings.join(d);return r=e.keyString.get(n),void 0===r&&(r=new y(t,t.getTemplateElement()),e.keyString.set(n,r)),e.stringsArray.set(t.strings,r),r}(()=>{try{const t={get capture(){return U=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();const O=new Map,R=new WeakMap;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const L=(t,e)=>`${t}--${e}`;let M=!0;void 0===window.ShadyCSS?M=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),M=!1);const q=t=>e=>{const r=L(e.type,t);let n=O.get(r);void 0===n&&(n={stringsArray:new WeakMap,keyString:new Map},O.set(r,n));let i=n.stringsArray.get(e.strings);if(void 0!==i)return i;const o=e.strings.join(d);if(i=n.keyString.get(o),void 0===i){const r=e.getTemplateElement();M&&window.ShadyCSS.prepareTemplateDom(r,t),i=new y(e,r),n.keyString.set(o,i)}return n.stringsArray.set(e.strings,i),i},j=["html","svg"],H=new Set,F=(t,e,r)=>{H.add(t);const n=r?r.element:document.createElement("template"),i=e.querySelectorAll("style"),{length:o}=i;if(0===o)return void window.ShadyCSS.prepareTemplateStyles(n,t);const s=document.createElement("style");for(let t=0;t<o;t++){const e=i[t];e.parentNode.removeChild(e),s.textContent+=e.textContent}(t=>{j.forEach((e=>{const r=O.get(L(e,t));void 0!==r&&r.keyString.forEach((t=>{const{element:{content:e}}=t,r=new Set;Array.from(e.querySelectorAll("style")).forEach((t=>{r.add(t)})),S(t,r)}))}))})(t);const c=n.content;r?function(t,e,r=null){const{element:{content:n},parts:i}=t;if(null==r)return void n.appendChild(e);const o=document.createTreeWalker(n,133,null,!1);let s=x(i),c=0,a=-1;for(;o.nextNode();)for(a++,o.currentNode===r&&(c=_(e),r.parentNode.insertBefore(e,r));-1!==s&&i[s].index===a;){if(c>0){for(;-1!==s;)i[s].index+=c,s=x(i,s);return}s=x(i,s)}}(r,s,c.firstChild):c.insertBefore(s,c.firstChild),window.ShadyCSS.prepareTemplateStyles(n,t);const a=c.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==a)e.insertBefore(a.cloneNode(!0),e.firstChild);else if(r){c.insertBefore(s,c.firstChild);const t=new Set;t.add(s),S(r,t)}};window.JSCompiler_renameProperty=(t,e)=>t;const $={toAttribute(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){switch(e){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},W=(t,e)=>e!==t&&(e==e||t==t),V={attribute:!0,type:String,converter:$,reflect:!1,hasChanged:W};class D extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach(((e,r)=>{const n=this._attributeNameForProperty(r,e);void 0!==n&&(this._attributeToPropertyMap.set(n,r),t.push(n))})),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach(((t,e)=>this._classProperties.set(e,t)))}}static createProperty(t,e=V){if(this._ensureClassProperties(),this._classProperties.set(t,e),e.noAccessor||this.prototype.hasOwnProperty(t))return;const r="symbol"==typeof t?Symbol():"__"+t,n=this.getPropertyDescriptor(t,r,e);void 0!==n&&Object.defineProperty(this.prototype,t,n)}static getPropertyDescriptor(t,e,r){return{get(){return this[e]},set(n){const i=this[t];this[e]=n,this.requestUpdateInternal(t,i,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||V}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty("finalized")||t.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const t=this.properties,e=[...Object.getOwnPropertyNames(t),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]];for(const r of e)this.createProperty(r,t[r])}}static _attributeNameForProperty(t,e){const r=e.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof t?t.toLowerCase():void 0}static _valueHasChanged(t,e,r=W){return r(t,e)}static _propertyValueFromAttribute(t,e){const r=e.type,n=e.converter||$,i="function"==typeof n?n:n.fromAttribute;return i?i(t,r):t}static _propertyValueToAttribute(t,e){if(void 0===e.reflect)return;const r=e.type,n=e.converter;return(n&&n.toAttribute||$.toAttribute)(t,r)}initialize(){this._updateState=0,this._updatePromise=new Promise((t=>this._enableUpdatingResolver=t)),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach(((t,e)=>{if(this.hasOwnProperty(e)){const t=this[e];delete this[e],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(e,t)}}))}_applyInstanceProperties(){this._instanceProperties.forEach(((t,e)=>this[e]=t)),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,e,r){e!==r&&this._attributeToProperty(t,r)}_propertyToAttribute(t,e,r=V){const n=this.constructor,i=n._attributeNameForProperty(t,r);if(void 0!==i){const t=n._propertyValueToAttribute(e,r);if(void 0===t)return;this._updateState=8|this._updateState,null==t?this.removeAttribute(i):this.setAttribute(i,t),this._updateState=-9&this._updateState}}_attributeToProperty(t,e){if(8&this._updateState)return;const r=this.constructor,n=r._attributeToPropertyMap.get(t);if(void 0!==n){const t=r.getPropertyOptions(n);this._updateState=16|this._updateState,this[n]=r._propertyValueFromAttribute(e,t),this._updateState=-17&this._updateState}}requestUpdateInternal(t,e,r){let n=!0;if(void 0!==t){const i=this.constructor;r=r||i.getPropertyOptions(t),i._valueHasChanged(this[t],e,r.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,e),!0!==r.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,r))):n=!1}!this._hasRequestedUpdate&&n&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,e){return this.requestUpdateInternal(t,e),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(t){}const t=this.performUpdate();return null!=t&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let t=!1;const e=this._changedProperties;try{t=this.shouldUpdate(e),t?this.update(e):this._markUpdated()}catch(e){throw t=!1,this._markUpdated(),e}t&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(e)),this.updated(e))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach(((t,e)=>this._propertyToAttribute(e,this[e],t))),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}D.finalized=!0;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const B=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?Object.assign(Object.assign({},e),{finisher(r){r.createProperty(e.key,t)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}};function z(t){return(e,r)=>void 0!==r?((t,e,r)=>{e.constructor.createProperty(r,t)})(t,e,r):B(t,e)}
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/const J=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Y=Symbol();class G{constructor(t,e){if(e!==Y)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return void 0===this._styleSheet&&(J?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
(window.litElementVersions||(window.litElementVersions=[])).push("2.4.0");const K={};class X extends D{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const t=this.getStyles();if(Array.isArray(t)){const e=(t,r)=>t.reduceRight(((t,r)=>Array.isArray(r)?e(r,t):(t.add(r),t)),r),r=e(t,new Set),n=[];r.forEach((t=>n.unshift(t))),this._styles=n}else this._styles=void 0===t?[]:[t];this._styles=this._styles.map((t=>{if(t instanceof CSSStyleSheet&&!J){const e=Array.prototype.slice.call(t.cssRules).reduce(((t,e)=>t+e.cssText),"");return new G(String(e),Y)}return t}))}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const t=this.constructor._styles;0!==t.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?J?this.renderRoot.adoptedStyleSheets=t.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map((t=>t.cssText)),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(t){const e=this.render();super.update(t),e!==K&&this.constructor.render(e,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach((t=>{const e=document.createElement("style");e.textContent=t.cssText,this.renderRoot.appendChild(e)})))}render(){return K}}function Q(t){return"function"==typeof t}function Z(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}X.finalized=!0,X.render=(t,e,r)=>{if(!r||"object"!=typeof r||!r.scopeName)throw new Error("The `scopeName` option is required.");const n=r.scopeName,i=R.has(e),o=M&&11===e.nodeType&&!!e.host,s=o&&!H.has(n),c=s?document.createDocumentFragment():e;if(((t,e,r)=>{let n=R.get(e);void 0===n&&(p(e,e.firstChild),R.set(e,n=new k(Object.assign({templateFactory:I},r))),n.appendInto(e)),n.setValue(t),n.commit()})(t,c,Object.assign({templateFactory:q(n)},r)),s){const t=R.get(c);R.delete(c);const r=t.value instanceof C?t.value.template:void 0;F(n,c,r),p(e,e.firstChild),e.appendChild(c),R.set(e,t)}!i&&o&&window.ShadyCSS.styleElement(e.host)};var tt=Z((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function et(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var rt=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}var e;return t.prototype.unsubscribe=function(){var t,e,r,n,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(Array.isArray(s))try{for(var a=o(s),u=a.next();!u.done;u=a.next()){u.value.remove(this)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}else null==s||s.remove(this);var l=this.initialTeardown;if(Q(l))try{l()}catch(t){i=t instanceof tt?t.errors:[t]}var h=this._teardowns;if(h){this._teardowns=null;try{for(var p=o(h),d=p.next();!d.done;d=p.next()){var f=d.value;try{ot(f)}catch(t){i=null!=i?i:[],t instanceof tt?i=c(i,t.errors):i.push(t)}}}catch(t){r={error:t}}finally{try{d&&!d.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}}if(i)throw new tt(i)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)ot(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(r=this._teardowns)&&void 0!==r?r:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&et(e,t)},t.prototype.remove=function(e){var r=this._teardowns;r&&et(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),nt=rt.EMPTY;function it(t){return t instanceof rt||t&&"closed"in t&&Q(t.remove)&&Q(t.add)&&Q(t.unsubscribe)}function ot(t){Q(t)?t():t.unsubscribe()}var st={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ct={setTimeout:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=ct.delegate;return((null==r?void 0:r.setTimeout)||setTimeout).apply(void 0,c(t))},clearTimeout:function(t){var e=ct.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function at(t){ct.setTimeout((function(){throw t}))}function ut(){}var lt=function(t){function r(e){var r=t.call(this)||this;return r.isStopped=!1,e?(r.destination=e,it(e)&&e.add(r)):r.destination=dt,r}return e(r,t),r.create=function(t,e,r){return new ht(t,e,r)},r.prototype.next=function(t){this.isStopped||this._next(t)},r.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},r.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},r}(rt),ht=function(t){function r(e,r,n){var i=t.call(this)||this;if(i.destination=dt,(e||r||n)&&e!==dt){var o=void 0;if(Q(e))o=e;else if(e){var s;o=e.next,r=e.error,n=e.complete,i&&st.useDeprecatedNextContext?(s=Object.create(e)).unsubscribe=function(){return i.unsubscribe()}:s=e,o=null==o?void 0:o.bind(s),r=null==r?void 0:r.bind(s),n=null==n?void 0:n.bind(s)}i.destination={next:o||ut,error:r||pt,complete:n||ut}}return i}return e(r,t),r}(lt);function pt(t){at(t)}var dt={closed:!0,next:ut,error:pt,complete:ut},ft="function"==typeof Symbol&&Symbol.observable||"@@observable";function vt(t){return t}function yt(t){return 0===t.length?vt:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var mt=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n,i=(n=t)&&n instanceof lt||function(t){return t&&Q(t.next)&&Q(t.error)&&Q(t.complete)}(n)&&it(n)?t:new ht(t,e,r),o=this.operator,s=this.source;return i.add(o?o.call(i,s):s||st.useDeprecatedSynchronousErrorHandling?this._subscribe(i):this._trySubscribe(i)),i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=bt(e))((function(e,n){var i;i=r.subscribe((function(e){try{t(e)}catch(t){n(t),null==i||i.unsubscribe()}}),n,e)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[ft]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length?yt(t)(this):this},t.prototype.toPromise=function(t){var e=this;return new(t=bt(t))((function(t,r){var n;e.subscribe((function(t){return n=t}),(function(t){return r(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function bt(t){var e;return null!==(e=null!=t?t:st.Promise)&&void 0!==e?e:Promise}function wt(t){return Q(null==t?void 0:t.lift)}function gt(t){return function(e){if(wt(e))return e.lift((function(e){try{return t(e,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}var St=function(t){function r(e,r,n,i,o){var s=t.call(this,e)||this;return s.onUnsubscribe=o,r&&(s._next=function(t){try{r(t)}catch(t){this.destination.error(t)}}),n&&(s._error=function(t){try{n(t)}catch(t){this.destination.error(t)}this.unsubscribe()}),i&&(s._complete=function(){try{i()}catch(t){this.destination.error(t)}this.unsubscribe()}),s}return e(r,t),r.prototype.unsubscribe=function(){var e;!this.closed&&(null===(e=this.onUnsubscribe)||void 0===e||e.call(this)),t.prototype.unsubscribe.call(this)},r}(lt);function _t(){return gt((function(t,e){var r=null;t._refCount++;var n=new St(e,void 0,void 0,void 0,(function(){if(!t||t._refCount<=0||0<--t._refCount)r=null;else{var n=t._connection,i=r;r=null,!n||i&&n!==i||n.unsubscribe(),e.unsubscribe()}}));t.subscribe(n),n.closed||(r=t.connect())}))}var xt=function(t){function r(e,r){var n=t.call(this)||this;return n.source=e,n.subjectFactory=r,n._subject=null,n._refCount=0,n._connection=null,n}return e(r,t),r.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},r.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},r.prototype._teardown=function(){this._refCount=0;var t=this._connection;this._subject=this._connection=null,null==t||t.unsubscribe()},r.prototype.connect=function(){var t=this,e=this._connection;if(!e){e=this._connection=new rt;var r=this.getSubject();e.add(this.source.subscribe(new St(r,void 0,(function(e){t._teardown(),r.error(e)}),(function(){t._teardown(),r.complete()}),(function(){return t._teardown()})))),e.closed&&(this._connection=null,e=rt.EMPTY)}return e},r.prototype.refCount=function(){return _t()(this)},r}(mt),Et={schedule:function(t){var e=requestAnimationFrame,r=cancelAnimationFrame,n=Et.delegate;n&&(e=n.requestAnimationFrame,r=n.cancelAnimationFrame);var i=e((function(e){r=void 0,t(e)}));return new rt((function(){return null==r?void 0:r(i)}))},requestAnimationFrame:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Et.delegate;return((null==r?void 0:r.requestAnimationFrame)||requestAnimationFrame).apply(void 0,c(t))},cancelAnimationFrame:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Et.delegate;return((null==r?void 0:r.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,c(t))},delegate:void 0},Pt=Z((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),At=function(t){function r(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return e(r,t),r.prototype.lift=function(t){var e=new Ct(this,this);return e.operator=t,e},r.prototype._throwIfClosed=function(){if(this.closed)throw new Pt},r.prototype.next=function(t){var e,r;if(this._throwIfClosed(),!this.isStopped){var n=this.observers.slice();try{for(var i=o(n),s=i.next();!s.done;s=i.next()){s.value.next(t)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}}},r.prototype.error=function(t){if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;for(var e=this.observers;e.length;)e.shift().error(t)}},r.prototype.complete=function(){if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;for(var t=this.observers;t.length;)t.shift().complete()}},r.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},r.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},r.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},r.prototype._innerSubscribe=function(t){var e=this,r=this,n=r.hasError,i=r.isStopped,o=r.observers;return n||i?nt:(o.push(t),new rt((function(){return et(e.observers,t)})))},r.prototype._checkFinalizedStatuses=function(t){var e=this,r=e.hasError,n=e.thrownError,i=e.isStopped;r?t.error(n):i&&t.complete()},r.prototype.asObservable=function(){var t=new mt;return t.source=this,t},r.create=function(t,e){return new Ct(t,e)},r}(mt),Ct=function(t){function r(e,r){var n=t.call(this)||this;return n.destination=e,n.source=r,n}return e(r,t),r.prototype.next=function(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)},r.prototype.error=function(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)},r.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},r.prototype._subscribe=function(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:nt},r}(At),Nt=function(t){function r(e){var r=t.call(this)||this;return r._value=e,r}return e(r,t),Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),r.prototype._subscribe=function(e){var r=t.prototype._subscribe.call(this,e);return!r.closed&&e.next(this._value),r},r.prototype.getValue=function(){var t=this,e=t.hasError,r=t.thrownError,n=t._value;if(e)throw r;return this._throwIfClosed(),n},r.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},r}(At),Tt=function(){return Date.now()},kt=function(t){function r(e,r){return t.call(this)||this}return e(r,t),r.prototype.schedule=function(t,e){return this},r}(rt),Ut={setInterval:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Ut.delegate;return((null==r?void 0:r.setInterval)||setInterval).apply(void 0,c(t))},clearInterval:function(t){var e=Ut.delegate;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},It=function(t){function r(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n.pending=!1,n}return e(r,t),r.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},r.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),Ut.setInterval(t.flush.bind(t,this),r)},r.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return e;Ut.clearInterval(e)},r.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(t,e){var r,n=!1;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},r.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,r=this.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,et(n,this),null!=e&&(this.id=this.recycleAsyncId(r,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},r}(kt),Ot=function(){function t(e,r){void 0===r&&(r=t.now),this.schedulerActionCtor=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(r,e)},t.now=Tt,t}(),Rt=function(t){function r(e,r){void 0===r&&(r=Ot.now);var n=t.call(this,e,r)||this;return n.actions=[],n.active=!1,n.scheduled=void 0,n}return e(r,t),r.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},r}(Ot),Lt=new Rt(It),Mt=Lt,qt=function(t){function r(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n}return e(r,t),r.prototype.requestAsyncId=function(e,r,n){return void 0===n&&(n=0),null!==n&&n>0?t.prototype.requestAsyncId.call(this,e,r,n):(e.actions.push(this),e.scheduled||(e.scheduled=Et.requestAnimationFrame((function(){return e.flush(void 0)}))))},r.prototype.recycleAsyncId=function(e,r,n){if(void 0===n&&(n=0),null!=n&&n>0||null==n&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,r,n);0===e.actions.length&&(Et.cancelAnimationFrame(r),e.scheduled=void 0)},r}(It),jt=new(function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return e(r,t),r.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,r=this.actions,n=-1;t=t||r.shift();var i=r.length;do{if(e=t.execute(t.state,t.delay))break}while(++n<i&&(t=r.shift()));if(this.active=!1,e){for(;++n<i&&(t=r.shift());)t.unsubscribe();throw e}},r}(Rt))(qt),Ht=new mt((function(t){return t.complete()}));function Ft(t,e){return new mt((function(r){var n=0;return e.schedule((function(){n===t.length?r.complete():(r.next(t[n++]),r.closed||this.schedule())}))}))}var $t=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function Wt(t){return Q(null==t?void 0:t.then)}var Vt="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Dt(t){return Q(t[ft])}function Bt(t){return Q(null==t?void 0:t[Vt])}function zt(t){return Symbol.asyncIterator&&Q(null==t?void 0:t[Symbol.asyncIterator])}function Jt(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, AsyncIterable, or Iterable.")}function Yt(t,e){if(null!=t){if(Dt(t))return function(t,e){return new mt((function(r){var n=new rt;return n.add(e.schedule((function(){var i=t[ft]();n.add(i.subscribe({next:function(t){n.add(e.schedule((function(){return r.next(t)})))},error:function(t){n.add(e.schedule((function(){return r.error(t)})))},complete:function(){n.add(e.schedule((function(){return r.complete()})))}}))}))),n}))}(t,e);if($t(t))return Ft(t,e);if(Wt(t))return function(t,e){return new mt((function(r){return e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){r.next(t),r.add(e.schedule((function(){return r.complete()})))})))}),(function(t){r.add(e.schedule((function(){return r.error(t)})))}))}))}))}(t,e);if(zt(t))return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new mt((function(r){var n=new rt;return n.add(e.schedule((function(){var i=t[Symbol.asyncIterator]();n.add(e.schedule((function(){var t=this;i.next().then((function(e){e.done?r.complete():(r.next(e.value),t.schedule())}))})))}))),n}))}(t,e);if(Bt(t))return function(t,e){return new mt((function(r){var n;return r.add(e.schedule((function(){n=t[Vt](),function(t,e,r,n){void 0===n&&(n=0);var i=e.schedule((function(){try{r.call(this)}catch(e){t.error(e)}}),n);t.add(i)}(r,e,(function(){var t=n.next(),e=t.value;t.done?r.complete():(r.next(e),this.schedule())}))}))),function(){return Q(null==n?void 0:n.return)&&n.return()}}))}(t,e)}throw Jt(t)}function Gt(t,e){return e?Yt(t,e):Kt(t)}function Kt(t){if(t instanceof mt)return t;if(null!=t){if(Dt(t))return s=t,new mt((function(t){var e=s[ft]();if(Q(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if($t(t))return Xt(t);if(Wt(t))return o=t,new mt((function(t){o.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,at)}));if(zt(t))return r=t,new mt((function(t){(function(t,e){var r,o,s,c;return n(this,void 0,void 0,(function(){var n,u;return i(this,(function(i){switch(i.label){case 0:i.trys.push([0,5,6,11]),r=a(t),i.label=1;case 1:return[4,r.next()];case 2:if((o=i.sent()).done)return[3,4];n=o.value,e.next(n),i.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=i.sent(),s={error:u},[3,11];case 6:return i.trys.push([6,,9,10]),o&&!o.done&&(c=r.return)?[4,c.call(r)]:[3,8];case 7:i.sent(),i.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}}))}))})(r,t).catch((function(e){return t.error(e)}))}));if(Bt(t))return e=t,new mt((function(t){for(var r=e[Vt]();!t.closed;){var n=r.next(),i=n.done,o=n.value;i?t.complete():t.next(o)}return function(){return Q(null==r?void 0:r.return)&&r.return()}}))}var e,r,o,s;throw Jt(t)}function Xt(t){return new mt((function(e){for(var r=0;r<t.length&&!e.closed;r++)e.next(t[r]);e.complete()}))}function Qt(t,e){return e?Ft(t,e):Xt(t)}function Zt(t){return t&&Q(t.schedule)}function te(t){return t[t.length-1]}function ee(t){return Q(te(t))?t.pop():void 0}function re(t){return Zt(te(t))?t.pop():void 0}function ne(t,e){return"number"==typeof te(t)?t.pop():e}function ie(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=re(t);return r?Ft(t,r):Qt(t)}function oe(t,e){return gt((function(r,n){var i=0;r.subscribe(new St(n,(function(r){n.next(t.call(e,r,i++))})))}))}var se=Array.isArray;function ce(t){return oe((function(e){return function(t,e){return se(e)?t.apply(void 0,c(e)):t(e)}(t,e)}))}function ae(t,e){return void 0===e&&(e=0),gt((function(r,n){r.subscribe(new St(n,(function(r){return n.add(t.schedule((function(){return n.next(r)}),e))}),(function(r){return n.add(t.schedule((function(){return n.error(r)}),e))}),(function(){return n.add(t.schedule((function(){return n.complete()}),e))})))}))}function ue(t,e,r){return void 0===r&&(r=1/0),Q(e)?ue((function(r,n){return oe((function(t,i){return e(r,t,n,i)}))(Kt(t(r,n)))}),r):("number"==typeof e&&(r=e),gt((function(e,n){return function(t,e,r,n,i,o,s,c){var a=[],u=0,l=0,h=!1,p=function(){!h||a.length||u||e.complete()},d=function(t){return u<n?f(t):a.push(t)},f=function(t){o&&e.next(t),u++,Kt(r(t,l++)).subscribe(new St(e,(function(t){null==i||i(t),o?d(t):e.next(t)}),void 0,(function(){u--;for(var t=function(){var t=a.shift();s?e.add(s.schedule((function(){return f(t)}))):f(t)};a.length&&u<n;)t();p()})))};return t.subscribe(new St(e,d,void 0,(function(){h=!0,p()}))),function(){a=null,null==c||c()}}(e,n,t,r)})))}function le(t){return void 0===t&&(t=1/0),ue(vt,t)}function he(){return le(1)}function pe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return he()(Qt(t,re(t)))}function de(t){return new mt((function(e){Kt(t()).subscribe(e)}))}var fe=["addListener","removeListener"],ve=["addEventListener","removeEventListener"],ye=["on","off"];function me(t,e,r,n){if(Q(r)&&(n=r,r=void 0),n)return me(t,e,r).pipe(ce(n));var i=s(function(t){return Q(t.addEventListener)&&Q(t.removeEventListener)}(t)?ve.map((function(n){return function(i){return t[n](e,i,r)}})):function(t){return Q(t.addListener)&&Q(t.removeListener)}(t)?fe.map(be(t,e)):function(t){return Q(t.on)&&Q(t.off)}(t)?ye.map(be(t,e)):[],2),o=i[0],c=i[1];return!o&&$t(t)?ue((function(t){return me(t,e,r)}))(Qt(t)):new mt((function(t){if(!o)throw new TypeError("Invalid event target");var e=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.next(1<e.length?e:e[0])};return o(e),function(){return c(e)}}))}function be(t,e){return function(r){return function(n){return t[r](e,n)}}}function we(t,e,r){void 0===t&&(t=0),void 0===r&&(r=Mt);var n=-1;return null!=e&&(Zt(e)?r=e:n=e),new mt((function(e){var i,o=(i=t)instanceof Date&&!isNaN(i)?+t-r.now():t;o<0&&(o=0);var s=0;return r.schedule((function(){e.closed||(e.next(s++),0<=n?this.schedule(void 0,n):e.complete())}),o)}))}var ge=Array.isArray;function Se(t){return 1===t.length&&ge(t[0])?t[0]:t}function _e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=re(t),n=ne(t,1/0),i=Se(t);return i.length?1===i.length?Kt(i[0]):le(n)(Qt(i,r)):Ht}var xe,Ee=new mt(ut);function Pe(t,e){return gt((function(r,n){var i=0;r.subscribe(new St(n,(function(r){return t.call(e,r,i++)&&n.next(r)})))}))}function Ae(t){return gt((function(e,r){var n,i=null,o=!1;i=e.subscribe(new St(r,void 0,(function(s){n=Kt(t(s,Ae(t)(e))),i?(i.unsubscribe(),i=null,n.subscribe(r)):o=!0}))),o&&(i.unsubscribe(),i=null,n.subscribe(r))}))}function Ce(t,e){void 0===e&&(e=Lt);var r,n=we(t,e);return r=function(){return n},gt((function(t,e){var n=!1,i=null,o=null,s=function(){if(null==o||o.unsubscribe(),o=null,n){n=!1;var t=i;i=null,e.next(t)}};t.subscribe(new St(e,(function(t){null==o||o.unsubscribe(),n=!0,i=t,o=new St(e,s,void 0,ut),Kt(r(t)).subscribe(o)}),void 0,(function(){s(),e.complete()}),(function(){i=o=null})))}))}function Ne(t){return gt((function(e,r){e.subscribe(new St(r,(function(){return r.next(t)})))}))}function Te(t,e){return t===e}function ke(){return new At}function Ue(){return function(t){return _t()((n=Q(e=ke)?e:function(){return e},Q(r)?gt((function(t,e){var i=n();r(i).subscribe(e).add(t.subscribe(i))})):function(t){var e=new xt(t,n);return wt(t)&&(e.lift=t.lift),e.source=t,e.subjectFactory=n,e})(t));var e,r,n}}function Ie(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=re(t);return gt((function(e,n){(r?pe(t,e,r):pe(t,e)).subscribe(n)}))}function Oe(t,e){return gt((function(r,n){var i=null,o=0,s=!1,c=function(){return s&&!i&&n.complete()};r.subscribe(new St(n,(function(r){null==i||i.unsubscribe();var s=0,a=o++;Kt(t(r,a)).subscribe(i=new St(n,(function(t){return n.next(e?e(r,t,a,s++):t)}),void 0,(function(){i=null,c()})))}),void 0,(function(){s=!0,c()})))}))}function Re(t,e,r){var n=Q(t)||e||r?{next:t,error:e,complete:r}:t;return n?gt((function(t,e){t.subscribe(new St(e,(function(t){var r;null===(r=n.next)||void 0===r||r.call(n,t),e.next(t)}),(function(t){var r;null===(r=n.error)||void 0===r||r.call(n,t),e.error(t)}),(function(){var t;null===(t=n.complete)||void 0===t||t.call(n),e.complete()})))})):vt}function Le(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=ee(t);return gt((function(e,n){for(var i=t.length,o=new Array(i),s=t.map((function(){return!1})),a=!1,u=function(e){Kt(t[e]).subscribe(new St(n,(function(t){o[e]=t,a||s[e]||(s[e]=!0,(a=s.every(vt))&&(s=null))}),void 0,ut))},l=0;l<i;l++)u(l);e.subscribe(new St(n,(function(t){if(a){var e=c([t],o);n.next(r?r.apply(void 0,c(e)):e)}})))}))}class Me extends X{constructor(){super(...arguments),this.$connected=new At,xe.set(this,void 0),this.$={}}connectedCallback(){super.connectedCallback(),this.$connected.next(!0)}disconnectedCallback(){super.disconnectedCallback(),this.$connected.next(!1)}firstUpdated(){l(this,xe,!0)}updated(t){if(!u(this,xe))for(const e of t.keys())e in this.$&&this.$[e].next(this[e]);l(this,xe,!1)}fireEvent(t,e){this.dispatchEvent(new CustomEvent(t,e)),this.dispatchEvent(new CustomEvent(`${this.tagName.toLowerCase()}-${t}`,e))}}function qe(){const t=document.documentElement,e=document.body,r="scrollHeight";return t[r]||e[r]}function je(){return window.pageYOffset||document.body.scrollTop}xe=new WeakMap;const He=(t,e)=>(t.matches||t.msMatchesSelector).call(t,e);function Fe(t,e){let r=t;for(;null!=r;){if(He(r,e))return r;r=r.parentNode instanceof Element?r.parentNode:null}return null}var $e;function We({protocol:t,host:e},r=window.location){return t!==r.protocol||e!==r.host}function Ve(t){return t&&""===t.target}function De({url:t,anchor:e},r){return!(!Ve(e)||We(t,r)||function({hash:t,origin:e,pathname:r},n=window.location){return""!==t&&e===n.origin&&r===n.pathname}(t,r))}function Be({cause:t,url:{pathname:e,hash:r},oldURL:n}){return e===(null==n?void 0:n.pathname)&&(t===$e.Pop||t===$e.Push&&""!==r)}!function(t){t.Init="init",t.Hint="hint",t.Push="push",t.Pop="pop"}($e||($e={}));class ze{constructor(t){this.parent=t}fetchPage(t){return(e=t.url.href,r={method:"GET",mode:"cors",headers:{Accept:"text/html"}},new mt((t=>{const n=new AbortController,{signal:i}=n;let o=null;return fetch(e,{...r,signal:i}).then((e=>{o=e,t.next(e),t.complete()})).catch((e=>t.error(e))),()=>{o||n.abort()}}))).pipe(Oe((t=>t.text())),oe((e=>({...t,responseText:e}))),Ae((e=>ie({...t,error:e,responseText:null}))));var e,r}selectPrefetch({href:t},e,r){return t===e.url.href?ie(e):r.pipe((n=1)<=0?function(){return Ht}:gt((function(t,e){var r=0;t.subscribe(new St(e,(function(t){++r<=n&&(e.next(t),n<=r&&e.complete())})))})));var n}getResponse(t,e,r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=ee(t),n=Se(t);return n.length?new mt((function(t){var e=n.map((function(){return[]})),i=n.map((function(){return!1}));t.add((function(){e=i=null}));for(var o=function(o){Kt(n[o]).subscribe(new St(t,(function(n){if(e[o].push(n),e.every((function(t){return t.length}))){var s=e.map((function(t){return t.shift()}));t.next(r?r.apply(void 0,c(s)):s),e.some((function(t,e){return!t.length&&i[e]}))&&t.complete()}}),void 0,(function(){i[o]=!0,!e[o].length&&t.complete()})))},s=0;!t.closed&&s<n.length;s++)o(s);return function(){e=i=null}})):Ht}(this.selectPrefetch(e.url,r,t),this.parent.animPromise).pipe(oe((([t])=>({...t,...e}))))}}class Je{constructor(t){this.parent=t}get scriptSelector(){return this.parent.scriptSelector}removeScriptTags(t){const e=[];return t.forEach((t=>{t&&this.scriptSelector&&t.querySelectorAll(this.scriptSelector).forEach((t=>{if(t instanceof HTMLScriptElement){const r=[function(t){const e=document.createElement("script");return Array.from(t.attributes).forEach((t=>e.setAttributeNode(t.cloneNode()))),e.innerHTML=t.innerHTML,e}(t),t];e.push(r)}}))})),e}reinsertScriptTags(t){if(!this.scriptSelector)return Promise.resolve(t);const{scripts:e}=t,r=document.write;return Gt(e).pipe((i=t=>this.insertScript(t),Q(o)?ue(i,o,1):ue(i,1)),Ae((e=>ie({...t,error:e}))),(n=()=>document.write=r,gt((function(t,e){t.subscribe(e),e.add(n)}))),Ne(t)).toPromise();var n,i,o}insertScript([t,e]){return document.write=(...t)=>{const r=document.createElement("div");r.innerHTML=t.join(),Array.from(r.childNodes).forEach((t=>{var r;return null===(r=e.parentNode)||void 0===r?void 0:r.insertBefore(t,e)}))},new Promise(((r,n)=>{var i,o;""!==t.src?(t.addEventListener("load",r),t.addEventListener("error",n),null===(i=e.parentNode)||void 0===i||i.replaceChild(t,e)):(null===(o=e.parentNode)||void 0===o||o.replaceChild(t,e),r({}))}))}}function Ye(t,e){t.forEach((t=>{t&&(t.querySelectorAll("[href]").forEach(Ge("href",e)),t.querySelectorAll("[src]").forEach(Ge("src",e)),t.querySelectorAll("img[srcset]").forEach(function(t,e){return r=>{try{const n=r.getAttribute(t);if(null==n)return;r.setAttribute(t,n.split(/\s*,\s*/).map((t=>{const r=t.split(/\s+/);return r[0]=new URL(r[0],e).href,r.join(" ")})).join(", "))}catch(t){}}}("srcset",e)),t.querySelectorAll("blockquote[cite]").forEach(Ge("cite",e)),t.querySelectorAll("del[cite]").forEach(Ge("cite",e)),t.querySelectorAll("ins[cite]").forEach(Ge("cite",e)),t.querySelectorAll("q[cite]").forEach(Ge("cite",e)),t.querySelectorAll("img[longdesc]").forEach(Ge("longdesc",e)),t.querySelectorAll("frame[longdesc]").forEach(Ge("longdesc",e)),t.querySelectorAll("iframe[longdesc]").forEach(Ge("longdesc",e)),t.querySelectorAll("img[usemap]").forEach(Ge("usemap",e)),t.querySelectorAll("input[usemap]").forEach(Ge("usemap",e)),t.querySelectorAll("object[usemap]").forEach(Ge("usemap",e)),t.querySelectorAll("form[action]").forEach(Ge("action",e)),t.querySelectorAll("button[formaction]").forEach(Ge("formaction",e)),t.querySelectorAll("input[formaction]").forEach(Ge("formaction",e)),t.querySelectorAll("video[poster]").forEach(Ge("poster",e)),t.querySelectorAll("object[data]").forEach(Ge("data",e)),t.querySelectorAll("object[codebase]").forEach(Ge("codebase",e)),t.querySelectorAll("object[archive]").forEach(function(t,e){return r=>{try{const n=r.getAttribute(t);if(null==n)return;r.setAttribute(t,n.split(/[\s,]+/).map((t=>new URL(t,e).href)).join(", "))}catch(t){}}}("archive",e)))}))}function Ge(t,e){return r=>{try{const n=r.getAttribute(t);if(null==n)return;r.setAttribute(t,new URL(n,e).href)}catch(t){}}}class Ke{constructor(t){this.parent=t,this.scriptManager=new Je(t)}get el(){return this.parent}get replaceSelector(){return this.parent.replaceSelector}get scriptSelector(){return this.parent.scriptSelector}getReplaceElements(t){if(this.replaceSelector)return this.replaceSelector.split(",").map((e=>t.querySelector(e)));if(this.el.id)return[t.getElementById(this.el.id)];{const e=Array.from(document.getElementsByTagName(this.el.tagName)).indexOf(this.el);return[t.getElementsByTagName(this.el.tagName)[e]]}}responseToContent(t){const{responseText:e}=t,r=(new DOMParser).parseFromString(e,"text/html"),{title:n=""}=r,i=this.getReplaceElements(r);if(i.every((t=>null==t)))throw new Error(`Couldn't find any element in the document at '${location}'.`);const o=this.scriptSelector?this.scriptManager.removeScriptTags(i):[];return{...t,document:r,title:n,replaceEls:i,scripts:o}}replaceContentWithSelector(t,e){t.split(",").map((t=>document.querySelector(t))).forEach(((t,r)=>{var n;const i=e[r];i&&(null===(n=null==t?void 0:t.parentNode)||void 0===n||n.replaceChild(i,t))}))}replaceContentWholesale([t]){t&&(this.el.innerHTML=t.innerHTML)}replaceContent(t){this.replaceSelector?this.replaceContentWithSelector(this.replaceSelector,t):this.replaceContentWholesale(t)}replaceHead(t){const{head:e}=this.el.ownerDocument,r=e.querySelector("link[rel=canonical]"),n=t.head.querySelector("link[rel=canonical]");r&&n&&(r.href=n.href);const i=e.querySelector("meta[name=description]"),o=t.head.querySelector("meta[name=description]");i&&o&&(i.content=o.content)}updateDOM(t){try{const{replaceEls:e,document:r}=t;We(this.parent)&&Ye(e,this.parent.href),this.replaceHead(r),this.replaceContent(e)}catch(e){throw{...t,error:e}}}reinsertScriptTags(t){return this.scriptManager.reinsertScriptTags(t)}}const Xe=t=>Array.prototype.concat.apply([],t),Qe=t=>({addedNodes:new Set(Xe(t.map((t=>Array.from(t.addedNodes))))),removedNodes:new Set(Xe(t.map((t=>Array.from(t.removedNodes)))))});class Ze{setupEventListeners(){const t=me(this.el,"click").pipe(oe((t=>{const e=Fe(t.target,this.linkSelector);if(e instanceof HTMLAnchorElement)return[t,e]})),Pe((t=>!!t))),e=(t,e)=>t.matches(e)&&t instanceof HTMLAnchorElement?ie(t):Gt(t.querySelectorAll(e)).pipe(Pe((t=>t instanceof HTMLAnchorElement)));return{hintEvent$:this.$.linkSelector.pipe(Oe((t=>{const r=new Map,n=t=>{r.has(t)||r.set(t,(t=>_e(me(t,"mouseenter",{passive:!0}),me(t,"touchstart",{passive:!0}),me(t,"focus",{passive:!0})).pipe(oe((e=>[e,t]))))(t))},i=t=>{r.delete(t)};return(s=this.el,c={childList:!0,subtree:!0},new mt((t=>{const e=new MutationObserver((e=>e.forEach((e=>t.next(e)))));return e.observe(s,c),()=>{e.disconnect()}}))).pipe(Ie({addedNodes:[this.el],removedNodes:[]}),function(t=0){return e=>{let r=[];return e.pipe(Re((t=>r.push(t))),Ce(t),oe((()=>r)),Re((()=>r=[])))}}(500),oe(Qe),Oe((({addedNodes:o,removedNodes:s})=>(Gt(s).pipe(Pe((t=>t instanceof Element)),ue((r=>e(r,t))),Re(i)).subscribe(),Gt(o).pipe(Pe((t=>t instanceof Element)),ue((r=>e(r,t))),Re(n)).subscribe(),Gt(r.values()).pipe(le())))),(o=this.$.prefetch,t=>o.pipe(Oe((e=>e?t:Ee)))));var o,s,c}))),pushEvent$:t}}}const tr=t=>new Promise((e=>setTimeout(e,t)));class er{constructor(t){this.parent=t}onStart(t){this.parent.animPromise=tr(this.parent.duration);this.parent.fireEvent("start",{detail:{...t,transitionUntil:t=>{this.parent.animPromise=Promise.all([this.parent.animPromise,t])}}})}emitDOMError(t){process.env.DEBUG&&console.error(t);const e=location.href;window.history.back(),setTimeout((()=>document.location.assign(e)),100)}emitNetworkError(t){process.env.DEBUG&&console.error(t),this.parent.fireEvent("networkerror",{detail:t})}emitError(t){process.env.DEBUG&&console.error(t),this.parent.fireEvent("error",{detail:t})}emitReady(t){this.parent.fireEvent("ready",{detail:t})}emitAfter(t){this.parent.fadePromise=tr(this.parent.duration);this.parent.fireEvent("after",{detail:{...t,transitionUntil:t=>{this.parent.fadePromise=Promise.all([this.parent.fadePromise,t])}}})}emitProgress(t){this.parent.fireEvent("progress",{detail:t})}emitLoad(t){this.parent.fireEvent("load",{detail:t})}}window.HashChangeEvent=window.HashChangeEvent||function(t,{oldURL:e="",newURL:r=""}={}){const n=new CustomEvent(t);return n.oldURL=e,n.newURL=r,n};class rr{constructor(t){this.updateHistoryScrollPosition=()=>{if(We(this.parent))return;const t=this.assignScrollPosition(history.state||{});history.replaceState(t,document.title)},this.parent=t}updateHistoryState({cause:t,replace:e,url:r,oldURL:n}){if(!We(this.parent))switch(t){case $e.Init:case $e.Push:{const{histId:t}=this.parent;if(e||r.href===location.href){const e={...history.state,[t]:{}};history.replaceState(e,document.title,r.href)}else history.pushState({[t]:{}},document.title,r.href)}case $e.Pop:this.parent.simulateHashChange&&n&&function(t,e){t.hash!==e.hash&&window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:t.href,oldURL:e.href}))}(r,n)}}updateTitle({cause:t,title:e}){document.title=e,We(this.parent)||t!==$e.Push||history.replaceState(history.state,e)}assignScrollPosition(t){const{histId:e}=this.parent;return{...t,[e]:{...t[e],scrollTop:je(),scrollHeight:qe()}}}}class nr{constructor(t){this.parent=t,"scrollRestoration"in history&&(history.scrollRestoration="manual")}manageScrollPosition({cause:t,url:{hash:e}}){switch(t){case $e.Push:this.scrollHashIntoView(e,{behavior:"smooth",block:"start",inline:"nearest"});break;case $e.Pop:this.restoreScrollPosition();break;case $e.Init:this.restoreScrollPositionOnReload()}}elementFromHash(t){return document.getElementById(decodeURIComponent(t.substr(1)))}scrollHashIntoView(t,e){if(t){const r=this.elementFromHash(t);r&&r.scrollIntoView(e)}else window.scroll(window.pageXOffset,0)}restoreScrollPosition(){const{histId:t}=this.parent,{scrollTop:e}=history.state&&history.state[t]||{};null!=e&&window.scroll(window.pageXOffset,e)}restoreScrollPositionOnReload(){const{histId:t}=this.parent;history.state&&history.state[t]&&0===je()?this.restoreScrollPosition():location.hash&&requestAnimationFrame((()=>this.scrollHashIntoView(location.hash,!0)))}}var ir,or,sr,cr,ar,ur,lr,hr,pr,dr,fr,vr,yr;let mr=class extends(function(t,e){return e.forEach((e=>{Object.getOwnPropertyNames(e.prototype).forEach((r=>{t.prototype[r]=e.prototype[r]}))})),t}(Me,[Ze])){constructor(){super(...arguments),this.el=this,this.linkSelector="a[href]:not([data-no-push])",this.prefetch=!1,this.duration=0,this.simulateHashChange=!1,this.baseURL=window.location.href,ir.set(this,function(){let t,e;const r=new Promise(((r,n)=>(t=r,e=n)));return r.resolve=t,r.reject=e,r}()),this.animPromise=Promise.resolve(null),this.fadePromise=Promise.resolve(null),or.set(this,new nr(this)),sr.set(this,new rr(this)),cr.set(this,new ze(this)),ar.set(this,new Ke(this)),ur.set(this,new er(this)),lr.set(this,new URL(this.baseURL)),hr.set(this,((t,e)=>{const r=new URL(u(this,lr).href);r[t]=e,this.assign(r.href)})),pr.set(this,0),dr.set(this,new At),fr.set(this,(t=>{We(Fe(t.target,"a[href]"))&&u(this,sr).updateHistoryScrollPosition()})),vr.set(this,void 0),yr.set(this,(()=>{const{pushEvent$:t,hintEvent$:e}=this.setupEventListeners(),r=_e(t.pipe(oe((([t,e])=>({cause:$e.Push,url:new URL(e.href,this.href),anchor:e,event:t,cacheNr:u(this,pr)}))),Pe((t=>function({url:t,anchor:e,event:{metaKey:r,ctrlKey:n}},i){return!(r||n||!Ve(e)||We(t,i))}(t,this))),Re((({event:t})=>{t.preventDefault(),u(this,sr).updateHistoryScrollPosition()}))),me(window,"popstate").pipe(Pe((()=>window.history.state&&window.history.state[this.histId])),oe((t=>({cause:$e.Pop,url:new URL(window.location.href),cacheNr:u(this,pr),event:t})))),u(this,dr)).pipe(Ie({url:new URL(window.location.href)}),gt((function(t,e){var r,n=!1;t.subscribe(new St(e,(function(t){var i=r;r=t,n&&e.next([i,t]),n=!0})))})),oe((([t,e])=>Object.assign(e,{oldURL:t.url}))),Ue()),n=r.pipe(Pe((t=>!Be(t))),Ue()),i=r.pipe(Pe((t=>Be(t))),Pe((()=>history.state&&history.state[this.histId])),ae(jt),Re((t=>{u(this,sr).updateHistoryState(t),u(this,or).manageScrollPosition(t)}))),o=de((()=>_e(n.pipe(Ne(!0)),u(this,vr).pipe(Ne(!1))))).pipe(Ie(!1)),s=_e(e.pipe(function(t,...e){return r=>0===e.length?r.pipe(Le(t),Pe((([,t])=>t)),oe((([t])=>t))):r.pipe(Le(t,...e),Pe((([,...t])=>t.every((t=>t)))),oe((([t])=>t)))}(o.pipe(oe((t=>!t)))),oe((([t,e])=>({cause:$e.Hint,url:new URL(e.href,this.href),anchor:e,event:t,cacheNr:u(this,pr)}))),Pe((t=>De(t,this)))),n).pipe((c=null!=(c=(t,e)=>{return n=e,(r=t).url.href===n.url.href&&r.error===n.error&&r.cacheNr===n.cacheNr;var r,n})?c:Te,gt((function(t,e){var r,n=!0;t.subscribe(new St(e,(function(t){(n&&(r=t,1)||!c(r,r=a?a(t):t))&&e.next(t),n=!1})))}))),Oe((t=>u(this,cr).fetchPage(t))),Ie({url:{}}),Ue());var c,a;const h=l(this,vr,n.pipe(Re((t=>{u(this,ur).onStart(t),u(this,sr).updateHistoryState(t),l(this,lr,t.url)})),Le(s),Oe((t=>u(this,cr).getResponse(s,...t))),Ue())),p=h.pipe(Pe((t=>!t.error))),d=h.pipe(Pe((t=>!!t.error))),f=p.pipe(oe((t=>u(this,ar).responseToContent(t))),Re((t=>u(this,ur).emitReady(t))),ae(jt),Re((t=>{u(this,ar).updateDOM(t),u(this,sr).updateTitle(t),u(this,ur).emitAfter(t)})),Ie({cause:$e.Init,url:u(this,lr),scripts:[]}),ae(jt),Re((t=>u(this,or).manageScrollPosition(t))),Re({error:t=>u(this,ur).emitDOMError(t)}),Ae(((t,e)=>e)),Oe((t=>this.fadePromise.then((()=>t)))),Oe((t=>u(this,ar).reinsertScriptTags(t))),Re({error:t=>u(this,ur).emitError(t)}),Ae(((t,e)=>e)),Re((t=>u(this,ur).emitLoad(t)))),v=d.pipe(Re((t=>u(this,ur).emitNetworkError(t)))),y=n.pipe(Oe((t=>{return de((()=>this.animPromise)).pipe((e=h,gt((function(t,r){Kt(e).subscribe(new St(r,(function(){return r.complete()}),void 0,ut)),!r.closed&&t.subscribe(r)}))),Ne(t));var e})),Re((t=>u(this,ur).emitProgress(t))));f.subscribe(),i.subscribe(),v.subscribe(),y.subscribe(),u(this,ir).resolve(this),this.fireEvent("init")}))}createRenderRoot(){return this}get initialized(){return u(this,ir)}get hash(){return u(this,lr).hash}get host(){return u(this,lr).host}get hostname(){return u(this,lr).hostname}get href(){return u(this,lr).href}get pathname(){return u(this,lr).pathname}get port(){return u(this,lr).port}get protocol(){return u(this,lr).protocol}get search(){return u(this,lr).search}get origin(){return u(this,lr).origin}get ancestorOrigins(){return window.location.ancestorOrigins}set hash(t){u(this,hr).call(this,"hash",t)}set host(t){u(this,hr).call(this,"host",t)}set hostname(t){u(this,hr).call(this,"hostname",t)}set href(t){u(this,hr).call(this,"href",t)}set pathname(t){u(this,hr).call(this,"pathname",t)}set port(t){u(this,hr).call(this,"port",t)}set protocol(t){u(this,hr).call(this,"protocol",t)}set search(t){u(this,hr).call(this,"search",t)}get histId(){return this.id||this.tagName}assign(t){u(this,dr).next({cause:$e.Push,url:new URL(t,this.href),cacheNr:l(this,pr,+u(this,pr)+1)})}reload(){u(this,dr).next({cause:$e.Push,url:new URL(this.href),cacheNr:l(this,pr,+u(this,pr)+1),replace:!0})}replace(t){u(this,dr).next({cause:$e.Push,url:new URL(t,this.href),cacheNr:l(this,pr,+u(this,pr)+1),replace:!0})}connectedCallback(){super.connectedCallback(),this.$={linkSelector:new Nt(this.linkSelector),prefetch:new Nt(this.prefetch)},window.addEventListener("beforeunload",u(this,sr).updateHistoryScrollPosition),document.documentElement.addEventListener("click",u(this,fr)),this.updateComplete.then(u(this,yr))}disconnectedCallback(){window.removeEventListener("beforeunload",u(this,sr).updateHistoryScrollPosition),document.documentElement.removeEventListener("click",u(this,fr))}};var br;ir=new WeakMap,or=new WeakMap,sr=new WeakMap,cr=new WeakMap,ar=new WeakMap,ur=new WeakMap,lr=new WeakMap,hr=new WeakMap,pr=new WeakMap,dr=new WeakMap,fr=new WeakMap,vr=new WeakMap,yr=new WeakMap,r([z({type:String,reflect:!0,attribute:"replace-selector"})],mr.prototype,"replaceSelector",void 0),r([z({type:String,reflect:!0,attribute:"link-selector"})],mr.prototype,"linkSelector",void 0),r([z({type:String,reflect:!0,attribute:"script-selector"})],mr.prototype,"scriptSelector",void 0),r([z({type:Boolean,reflect:!0})],mr.prototype,"prefetch",void 0),r([z({type:Number,reflect:!0})],mr.prototype,"duration",void 0),r([z({type:Boolean,reflect:!0,attribute:"hashchange"})],mr.prototype,"simulateHashChange",void 0),r([z({type:String})],mr.prototype,"baseURL",void 0),r([z()],mr.prototype,"assign",null),r([z()],mr.prototype,"reload",null),r([z()],mr.prototype,"replace",null),mr=r([(br="hy-push-state",t=>"function"==typeof t?((t,e)=>(window.customElements.define(t,e),e))(br,t):((t,e)=>{const{kind:r,elements:n}=e;return{kind:r,elements:n,finisher(e){window.customElements.define(t,e)}}})(br,t))],mr);export{mr as HyPushState};
//# sourceMappingURL=hy-push-state.js.map
