/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};function e(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}function r(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s}function n(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{a(n.next(t))}catch(t){o(t)}}function c(t){try{a(n.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,c)}a((n=n.apply(t,e||[])).next())}))}function i(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}function o(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],s=0,c=o.length;s<c;s++,i++)n[i]=o[s];return n}function c(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=o(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,i,(e=t[r](e)).done,e.value)}))}}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const a="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,u=(t,e,r=null)=>{for(;e!==r;){const r=e.nextSibling;t.removeChild(e),e=r}},l=`{{lit-${String(Math.random()).slice(2)}}}`,h=`\x3c!--${l}--\x3e`,p=new RegExp(`${l}|${h}`);class d{constructor(t,e){this.parts=[],this.element=e;const r=[],n=[],i=document.createTreeWalker(e.content,133,null,!1);let o=0,s=-1,c=0;const{strings:a,values:{length:u}}=t;for(;c<u;){const t=i.nextNode();if(null!==t){if(s++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:r}=e;let n=0;for(let t=0;t<r;t++)f(e[t].name,"$lit$")&&n++;for(;n-- >0;){const e=a[c],r=m.exec(e)[2],n=r.toLowerCase()+"$lit$",i=t.getAttribute(n);t.removeAttribute(n);const o=i.split(p);this.parts.push({type:"attribute",index:s,name:r,strings:o}),c+=o.length-1}}"TEMPLATE"===t.tagName&&(n.push(t),i.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(l)>=0){const n=t.parentNode,i=e.split(p),o=i.length-1;for(let e=0;e<o;e++){let r,o=i[e];if(""===o)r=v();else{const t=m.exec(o);null!==t&&f(t[2],"$lit$")&&(o=o.slice(0,t.index)+t[1]+t[2].slice(0,-"$lit$".length)+t[3]),r=document.createTextNode(o)}n.insertBefore(r,t),this.parts.push({type:"node",index:++s})}""===i[o]?(n.insertBefore(v(),t),r.push(t)):t.data=i[o],c+=o}}else if(8===t.nodeType)if(t.data===l){const e=t.parentNode;null!==t.previousSibling&&s!==o||(s++,e.insertBefore(v(),t)),o=s,this.parts.push({type:"node",index:s}),null===t.nextSibling?t.data="":(r.push(t),s--),c++}else{let e=-1;for(;-1!==(e=t.data.indexOf(l,e+1));)this.parts.push({type:"node",index:-1}),c++}}else i.currentNode=n.pop()}for(const t of r)t.parentNode.removeChild(t)}}const f=(t,e)=>{const r=t.length-e.length;return r>=0&&t.slice(r)===e},y=t=>-1!==t.index,v=()=>document.createComment(""),m=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function b(t,e){const{element:{content:r},parts:n}=t,i=document.createTreeWalker(r,133,null,!1);let o=g(n),s=n[o],c=-1,a=0;const u=[];let l=null;for(;i.nextNode();){c++;const t=i.currentNode;for(t.previousSibling===l&&(l=null),e.has(t)&&(u.push(t),null===l&&(l=t)),null!==l&&a++;void 0!==s&&s.index===c;)s.index=null!==l?-1:s.index-a,o=g(n,o),s=n[o]}u.forEach((t=>t.parentNode.removeChild(t)))}const w=t=>{let e=11===t.nodeType?0:1;const r=document.createTreeWalker(t,133,null,!1);for(;r.nextNode();)e++;return e},g=(t,e=-1)=>{for(let r=e+1;r<t.length;r++){const e=t[r];if(y(e))return r}return-1};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const S=new WeakMap,_={},x={};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class P{constructor(t,e,r){this.__parts=[],this.template=t,this.processor=e,this.options=r}update(t){let e=0;for(const r of this.__parts)void 0!==r&&r.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=a?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],r=this.template.parts,n=document.createTreeWalker(t,133,null,!1);let i,o=0,s=0,c=n.nextNode();for(;o<r.length;)if(i=r[o],y(i)){for(;s<i.index;)s++,"TEMPLATE"===c.nodeName&&(e.push(c),n.currentNode=c.content),null===(c=n.nextNode())&&(n.currentNode=e.pop(),c=n.nextNode());if("node"===i.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(c.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(c,i.name,i.strings,this.options));o++}else this.__parts.push(void 0),o++;return a&&(document.adoptNode(t),customElements.upgrade(t)),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const E=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:t=>t}),A=` ${l} `;class C{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(v()),this.endNode=t.appendChild(v())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=v()),t.__insert(this.endNode=v())}insertAfterPart(t){t.__insert(this.startNode=v()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(null===this.startNode.parentNode)return;for(;"function"==typeof(t=this.__pendingValue)&&S.has(t);){const t=this.__pendingValue;this.__pendingValue=_,t(this)}var t;const e=this.__pendingValue;e!==_&&((t=>null===t||!("object"==typeof t||"function"==typeof t))(e)?e!==this.value&&this.__commitText(e):e instanceof class{constructor(t,e,r,n){this.strings=t,this.values=e,this.type=r,this.processor=n}getHTML(){const t=this.strings.length-1;let e="",r=!1;for(let n=0;n<t;n++){const t=this.strings[n],i=t.lastIndexOf("\x3c!--");r=(i>-1||r)&&-1===t.indexOf("--\x3e",i+1);const o=m.exec(t);e+=null===o?t+(r?A:h):t.substr(0,o.index)+o[1]+o[2]+"$lit$"+o[3]+l}return e+=this.strings[t],e}getTemplateElement(){const t=document.createElement("template");let e=this.getHTML();return void 0!==E&&(e=E.createHTML(e)),t.innerHTML=e,t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):(t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]))(e)?this.__commitIterable(e):e===x?(this.value=x,this.clear()):this.__commitText(e))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,r="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=r:this.__commitNode(document.createTextNode(r)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof P&&this.value.template===e)this.value.update(t.values);else{const r=new P(e,t.processor,this.options),n=r._clone();r.update(t.values),this.__commitNode(n),this.value=r}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let r,n=0;for(const i of t)r=e[n],void 0===r&&(r=new C(this.options),e.push(r),0===n?r.appendIntoPart(this):r.insertAfterPart(e[n-1])),r.setValue(i),r.commit(),n++;n<e.length&&(e.length=n,this.clear(r&&r.endNode))}clear(t=this.startNode){u(this.startNode.parentNode,t.nextSibling,this.endNode)}}let N=!1;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
function T(t){let e=k.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},k.set(t.type,e));let r=e.stringsArray.get(t.strings);if(void 0!==r)return r;const n=t.strings.join(l);return r=e.keyString.get(n),void 0===r&&(r=new d(t,t.getTemplateElement()),e.keyString.set(n,r)),e.stringsArray.set(t.strings,r),r}(()=>{try{const t={get capture(){return N=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();const k=new Map,U=new WeakMap;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const M=(t,e)=>`${t}--${e}`;let I=!0;void 0===window.ShadyCSS?I=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),I=!1);const L=t=>e=>{const r=M(e.type,t);let n=k.get(r);void 0===n&&(n={stringsArray:new WeakMap,keyString:new Map},k.set(r,n));let i=n.stringsArray.get(e.strings);if(void 0!==i)return i;const o=e.strings.join(l);if(i=n.keyString.get(o),void 0===i){const r=e.getTemplateElement();I&&window.ShadyCSS.prepareTemplateDom(r,t),i=new d(e,r),n.keyString.set(o,i)}return n.stringsArray.set(e.strings,i),i},O=["html","svg"],R=new Set,q=(t,e,r)=>{R.add(t);const n=r?r.element:document.createElement("template"),i=e.querySelectorAll("style"),{length:o}=i;if(0===o)return void window.ShadyCSS.prepareTemplateStyles(n,t);const s=document.createElement("style");for(let t=0;t<o;t++){const e=i[t];e.parentNode.removeChild(e),s.textContent+=e.textContent}(t=>{O.forEach((e=>{const r=k.get(M(e,t));void 0!==r&&r.keyString.forEach((t=>{const{element:{content:e}}=t,r=new Set;Array.from(e.querySelectorAll("style")).forEach((t=>{r.add(t)})),b(t,r)}))}))})(t);const c=n.content;r?function(t,e,r=null){const{element:{content:n},parts:i}=t;if(null==r)return void n.appendChild(e);const o=document.createTreeWalker(n,133,null,!1);let s=g(i),c=0,a=-1;for(;o.nextNode();)for(a++,o.currentNode===r&&(c=w(e),r.parentNode.insertBefore(e,r));-1!==s&&i[s].index===a;){if(c>0){for(;-1!==s;)i[s].index+=c,s=g(i,s);return}s=g(i,s)}}(r,s,c.firstChild):c.insertBefore(s,c.firstChild),window.ShadyCSS.prepareTemplateStyles(n,t);const a=c.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==a)e.insertBefore(a.cloneNode(!0),e.firstChild);else if(r){c.insertBefore(s,c.firstChild);const t=new Set;t.add(s),b(r,t)}};window.JSCompiler_renameProperty=(t,e)=>t;const j={toAttribute(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){switch(e){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},H=(t,e)=>e!==t&&(e==e||t==t),$={attribute:!0,type:String,converter:j,reflect:!1,hasChanged:H};class F extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach(((e,r)=>{const n=this._attributeNameForProperty(r,e);void 0!==n&&(this._attributeToPropertyMap.set(n,r),t.push(n))})),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach(((t,e)=>this._classProperties.set(e,t)))}}static createProperty(t,e=$){if(this._ensureClassProperties(),this._classProperties.set(t,e),e.noAccessor||this.prototype.hasOwnProperty(t))return;const r="symbol"==typeof t?Symbol():"__"+t,n=this.getPropertyDescriptor(t,r,e);void 0!==n&&Object.defineProperty(this.prototype,t,n)}static getPropertyDescriptor(t,e,r){return{get(){return this[e]},set(n){const i=this[t];this[e]=n,this.requestUpdateInternal(t,i,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||$}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty("finalized")||t.finalize(),this.finalized=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const t=this.properties,e=[...Object.getOwnPropertyNames(t),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]];for(const r of e)this.createProperty(r,t[r])}}static _attributeNameForProperty(t,e){const r=e.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof t?t.toLowerCase():void 0}static _valueHasChanged(t,e,r=H){return r(t,e)}static _propertyValueFromAttribute(t,e){const r=e.type,n=e.converter||j,i="function"==typeof n?n:n.fromAttribute;return i?i(t,r):t}static _propertyValueToAttribute(t,e){if(void 0===e.reflect)return;const r=e.type,n=e.converter;return(n&&n.toAttribute||j.toAttribute)(t,r)}initialize(){this._updateState=0,this._updatePromise=new Promise((t=>this._enableUpdatingResolver=t)),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach(((t,e)=>{if(this.hasOwnProperty(e)){const t=this[e];delete this[e],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(e,t)}}))}_applyInstanceProperties(){this._instanceProperties.forEach(((t,e)=>this[e]=t)),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,e,r){e!==r&&this._attributeToProperty(t,r)}_propertyToAttribute(t,e,r=$){const n=this.constructor,i=n._attributeNameForProperty(t,r);if(void 0!==i){const t=n._propertyValueToAttribute(e,r);if(void 0===t)return;this._updateState=8|this._updateState,null==t?this.removeAttribute(i):this.setAttribute(i,t),this._updateState=-9&this._updateState}}_attributeToProperty(t,e){if(8&this._updateState)return;const r=this.constructor,n=r._attributeToPropertyMap.get(t);if(void 0!==n){const t=r.getPropertyOptions(n);this._updateState=16|this._updateState,this[n]=r._propertyValueFromAttribute(e,t),this._updateState=-17&this._updateState}}requestUpdateInternal(t,e,r){let n=!0;if(void 0!==t){const i=this.constructor;r=r||i.getPropertyOptions(t),i._valueHasChanged(this[t],e,r.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,e),!0!==r.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,r))):n=!1}!this._hasRequestedUpdate&&n&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,e){return this.requestUpdateInternal(t,e),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(t){}const t=this.performUpdate();return null!=t&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let t=!1;const e=this._changedProperties;try{t=this.shouldUpdate(e),t?this.update(e):this._markUpdated()}catch(e){throw t=!1,this._markUpdated(),e}t&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(e)),this.updated(e))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach(((t,e)=>this._propertyToAttribute(e,this[e],t))),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}F.finalized=!0;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const V=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?Object.assign(Object.assign({},e),{finisher(r){r.createProperty(e.key,t)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}};function D(t){return(e,r)=>void 0!==r?((t,e,r)=>{e.constructor.createProperty(r,t)})(t,e,r):V(t,e)}
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/const z=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,B=Symbol();class W{constructor(t,e){if(e!==B)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return void 0===this._styleSheet&&(z?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
(window.litElementVersions||(window.litElementVersions=[])).push("2.4.0");const J={};class Y extends F{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const t=this.getStyles();if(Array.isArray(t)){const e=(t,r)=>t.reduceRight(((t,r)=>Array.isArray(r)?e(r,t):(t.add(r),t)),r),r=e(t,new Set),n=[];r.forEach((t=>n.unshift(t))),this._styles=n}else this._styles=void 0===t?[]:[t];this._styles=this._styles.map((t=>{if(t instanceof CSSStyleSheet&&!z){const e=Array.prototype.slice.call(t.cssRules).reduce(((t,e)=>t+e.cssText),"");return new W(String(e),B)}return t}))}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const t=this.constructor._styles;0!==t.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?z?this.renderRoot.adoptedStyleSheets=t.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map((t=>t.cssText)),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(t){const e=this.render();super.update(t),e!==J&&this.constructor.render(e,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach((t=>{const e=document.createElement("style");e.textContent=t.cssText,this.renderRoot.appendChild(e)})))}render(){return J}}function G(t){return"function"==typeof t}function K(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}Y.finalized=!0,Y.render=(t,e,r)=>{if(!r||"object"!=typeof r||!r.scopeName)throw new Error("The `scopeName` option is required.");const n=r.scopeName,i=U.has(e),o=I&&11===e.nodeType&&!!e.host,s=o&&!R.has(n),c=s?document.createDocumentFragment():e;if(((t,e,r)=>{let n=U.get(e);void 0===n&&(u(e,e.firstChild),U.set(e,n=new C(Object.assign({templateFactory:T},r))),n.appendInto(e)),n.setValue(t),n.commit()})(t,c,Object.assign({templateFactory:L(n)},r)),s){const t=U.get(c);U.delete(c);const r=t.value instanceof P?t.value.template:void 0;q(n,c,r),u(e,e.firstChild),e.appendChild(c),U.set(e,t)}!i&&o&&window.ShadyCSS.styleElement(e.host)};var X=K((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function Q(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var Z=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}var e;return t.prototype.unsubscribe=function(){var t;if(!this.closed){this.closed=!0;var e=this._parentage;if(Array.isArray(e))for(var r=0,n=e;r<n.length;r++){n[r].remove(this)}else null==e||e.remove(this);var i=this.initialTeardown;if(G(i))try{i()}catch(e){t=e instanceof X?e.errors:[e]}var o=this._teardowns;if(o){this._teardowns=null;for(var c=0,a=o;c<a.length;c++){var u=a[c];try{rt(u)}catch(e){t=null!=t?t:[],e instanceof X?t=s(t,e.errors):t.push(e)}}}if(t)throw new X(t)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)rt(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(r=this._teardowns)&&void 0!==r?r:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&Q(e,t)},t.prototype.remove=function(e){var r=this._teardowns;r&&Q(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}(),tt=Z.EMPTY;function et(t){return t instanceof Z||t&&"closed"in t&&G(t.remove)&&G(t.add)&&G(t.unsubscribe)}function rt(t){G(t)?t():t.unsubscribe()}var nt={onUnhandledError:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};function it(t){setTimeout((function(){throw t}))}function ot(){}var st=function(t){function r(e){var r=t.call(this)||this;return r.isStopped=!1,e?(r.destination=e,et(e)&&e.add(r)):r.destination=ut,r}return e(r,t),r.create=function(t,e,r){return new ct(t,e,r)},r.prototype.next=function(t){this.isStopped||this._next(t)},r.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},r.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},r}(Z),ct=function(t){function r(e,r,n){var i=t.call(this)||this;if(i.destination=ut,(e||r||n)&&e!==ut){var o=void 0;if(G(e))o=e;else if(e){var s;o=e.next,r=e.error,n=e.complete,i&&nt.useDeprecatedNextContext?(s=Object.create(e)).unsubscribe=function(){return i.unsubscribe()}:s=e,o=null==o?void 0:o.bind(s),r=null==r?void 0:r.bind(s),n=null==n?void 0:n.bind(s)}i.destination={next:o||ot,error:r||at,complete:n||ot}}return i}return e(r,t),r}(st);function at(t){it(t)}var ut={closed:!0,next:ot,error:at,complete:ot},lt="function"==typeof Symbol&&Symbol.observable||"@@observable";function ht(t){return t}function pt(t){return 0===t.length?ht:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var dt=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n,i=(n=t)&&n instanceof st||function(t){return t&&G(t.next)&&G(t.error)&&G(t.complete)}(n)&&et(n)?t:new ct(t,e,r),o=this.operator,s=this.source;return i.add(o?o.call(i,s):s||nt.useDeprecatedSynchronousErrorHandling?this._subscribe(i):this._trySubscribe(i)),i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){!function(t){for(;t;){var e=t,r=e.closed,n=e.destination,i=e.isStopped;if(r||i)return!1;t=n&&n instanceof st?n:null}return!0}(t)?it(e):t.error(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=ft(e))((function(e,n){var i;i=r.subscribe((function(e){try{t(e)}catch(t){n(t),null==i||i.unsubscribe()}}),n,e)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[lt]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length?pt(t)(this):this},t.prototype.toPromise=function(t){var e=this;return new(t=ft(t))((function(t,r){var n;e.subscribe((function(t){return n=t}),(function(t){return r(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function ft(t){var e;return null!==(e=null!=t?t:nt.Promise)&&void 0!==e?e:Promise}function yt(t){return G(null==t?void 0:t.lift)}function vt(t){return function(e){if(yt(e))return e.lift((function(e){try{return t(e,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}var mt=function(t){function r(e,r,n,i,o){var s=t.call(this,e)||this;return s.onUnsubscribe=o,r&&(s._next=function(t){try{r(t)}catch(t){this.destination.error(t)}}),n&&(s._error=function(t){try{n(t)}catch(t){this.destination.error(t)}this.unsubscribe()}),i&&(s._complete=function(){try{i()}catch(t){this.destination.error(t)}this.unsubscribe()}),s}return e(r,t),r.prototype.unsubscribe=function(){var e;!this.closed&&(null===(e=this.onUnsubscribe)||void 0===e||e.call(this)),t.prototype.unsubscribe.call(this)},r}(st);function bt(){return vt((function(t,e){var r=null;t._refCount++;var n=new mt(e,void 0,void 0,void 0,(function(){if(!t||t._refCount<=0||0<--t._refCount)r=null;else{var n=t._connection,i=r;r=null,!n||i&&n!==i||n.unsubscribe(),e.unsubscribe()}}));t.subscribe(n),n.closed||(r=t.connect())}))}var wt=function(t){function r(e,r){var n=t.call(this)||this;return n.source=e,n.subjectFactory=r,n._subject=null,n._refCount=0,n._connection=null,n}return e(r,t),r.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},r.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},r.prototype._teardown=function(){this._refCount=0;var t=this._connection;this._subject=this._connection=null,null==t||t.unsubscribe()},r.prototype.connect=function(){var t=this,e=this._connection;if(!e){e=this._connection=new Z;var r=this.getSubject();e.add(this.source.subscribe(new mt(r,void 0,(function(e){t._teardown(),r.error(e)}),(function(){t._teardown(),r.complete()}),(function(){return t._teardown()})))),e.closed&&(this._connection=null,e=Z.EMPTY)}return e},r.prototype.refCount=function(){return bt()(this)},r}(dt),gt={schedule:function(t){var e=requestAnimationFrame,r=cancelAnimationFrame,n=gt.delegate;n&&(e=n.requestAnimationFrame,r=n.cancelAnimationFrame);var i=e((function(e){r=void 0,t(e)}));return new Z((function(){return null==r?void 0:r(i)}))},requestAnimationFrame:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=gt.delegate;return((null==r?void 0:r.requestAnimationFrame)||requestAnimationFrame).apply(void 0,t)},cancelAnimationFrame:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=gt.delegate;return((null==r?void 0:r.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,t)},delegate:void 0},St=K((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),_t=function(t){function r(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return e(r,t),r.prototype.lift=function(t){var e=new xt(this,this);return e.operator=t,e},r.prototype._throwIfClosed=function(){if(this.closed)throw new St},r.prototype.next=function(t){if(this._throwIfClosed(),!this.isStopped)for(var e=0,r=this.observers.slice();e<r.length;e++){r[e].next(t)}},r.prototype.error=function(t){if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;for(var e=this.observers;e.length;)e.shift().error(t)}},r.prototype.complete=function(){if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;for(var t=this.observers;t.length;)t.shift().complete()}},r.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},r.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},r.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},r.prototype._innerSubscribe=function(t){var e=this,r=this,n=r.hasError,i=r.isStopped,o=r.observers;return n||i?tt:(o.push(t),new Z((function(){return Q(e.observers,t)})))},r.prototype._checkFinalizedStatuses=function(t){var e=this,r=e.hasError,n=e.thrownError,i=e.isStopped;r?t.error(n):i&&t.complete()},r.prototype.asObservable=function(){var t=new dt;return t.source=this,t},r.create=function(t,e){return new xt(t,e)},r}(dt),xt=function(t){function r(e,r){var n=t.call(this)||this;return n.destination=e,n.source=r,n}return e(r,t),r.prototype.next=function(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)},r.prototype.error=function(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)},r.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},r.prototype._subscribe=function(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:tt},r}(_t),Pt=function(t){function r(e){var r=t.call(this)||this;return r._value=e,r}return e(r,t),Object.defineProperty(r.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),r.prototype._subscribe=function(e){var r=t.prototype._subscribe.call(this,e);return!r.closed&&e.next(this._value),r},r.prototype.getValue=function(){var t=this,e=t.hasError,r=t.thrownError,n=t._value;if(e)throw r;return this._throwIfClosed(),n},r.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},r}(_t),Et=function(){return Date.now()},At=function(t){function r(e,r){return t.call(this)||this}return e(r,t),r.prototype.schedule=function(t,e){return this},r}(Z),Ct={setInterval:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Ct.delegate;return((null==r?void 0:r.setInterval)||setInterval).apply(void 0,t)},clearInterval:function(t){var e=Ct.delegate;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},Nt=function(t){function r(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n.pending=!1,n}return e(r,t),r.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},r.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),Ct.setInterval(t.flush.bind(t,this),r)},r.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return e;Ct.clearInterval(e)},r.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(t,e){var r,n=!1;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},r.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,r=this.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Q(n,this),null!=e&&(this.id=this.recycleAsyncId(r,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},r}(At),Tt=function(){function t(e,r){void 0===r&&(r=t.now),this.schedulerActionCtor=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(r,e)},t.now=Et,t}(),kt=function(t){function r(e,r){void 0===r&&(r=Tt.now);var n=t.call(this,e,r)||this;return n.actions=[],n.active=!1,n.scheduled=void 0,n}return e(r,t),r.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},r}(Tt),Ut=new kt(Nt),Mt=Ut,It=function(t){function r(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n}return e(r,t),r.prototype.requestAsyncId=function(e,r,n){return void 0===n&&(n=0),null!==n&&n>0?t.prototype.requestAsyncId.call(this,e,r,n):(e.actions.push(this),e.scheduled||(e.scheduled=gt.requestAnimationFrame((function(){return e.flush(void 0)}))))},r.prototype.recycleAsyncId=function(e,r,n){if(void 0===n&&(n=0),null!=n&&n>0||null==n&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,r,n);0===e.actions.length&&(gt.cancelAnimationFrame(r),e.scheduled=void 0)},r}(Nt),Lt=new(function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return e(r,t),r.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,r=this.actions,n=-1;t=t||r.shift();var i=r.length;do{if(e=t.execute(t.state,t.delay))break}while(++n<i&&(t=r.shift()));if(this.active=!1,e){for(;++n<i&&(t=r.shift());)t.unsubscribe();throw e}},r}(kt))(It),Ot=new dt((function(t){return t.complete()}));function Rt(t,e){return new dt((function(r){var n=0;return e.schedule((function(){n===t.length?r.complete():(r.next(t[n++]),r.closed||this.schedule())}))}))}var qt=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function jt(t){return G(null==t?void 0:t.then)}var Ht="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function $t(t){return G(t[lt])}function Ft(t){return G(null==t?void 0:t[Ht])}function Vt(t){return Symbol.asyncIterator&&G(null==t?void 0:t[Symbol.asyncIterator])}function Dt(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, AsyncIterable, or Iterable.")}function zt(t,e){if(null!=t){if($t(t))return function(t,e){return new dt((function(r){var n=new Z;return n.add(e.schedule((function(){var i=t[lt]();n.add(i.subscribe({next:function(t){n.add(e.schedule((function(){return r.next(t)})))},error:function(t){n.add(e.schedule((function(){return r.error(t)})))},complete:function(){n.add(e.schedule((function(){return r.complete()})))}}))}))),n}))}(t,e);if(qt(t))return Rt(t,e);if(jt(t))return function(t,e){return new dt((function(r){return e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){r.next(t),r.add(e.schedule((function(){return r.complete()})))})))}),(function(t){r.add(e.schedule((function(){return r.error(t)})))}))}))}))}(t,e);if(Vt(t))return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new dt((function(r){var n=new Z;return n.add(e.schedule((function(){var i=t[Symbol.asyncIterator]();n.add(e.schedule((function(){var t=this;i.next().then((function(e){e.done?r.complete():(r.next(e.value),t.schedule())}))})))}))),n}))}(t,e);if(Ft(t))return function(t,e){return new dt((function(r){var n;return r.add(e.schedule((function(){n=t[Ht](),function(t,e,r,n){void 0===n&&(n=0);var i=e.schedule((function(){try{r.call(this)}catch(e){t.error(e)}}),n);t.add(i)}(r,e,(function(){var t=n.next(),e=t.value;t.done?r.complete():(r.next(e),this.schedule())}))}))),function(){return G(null==n?void 0:n.return)&&n.return()}}))}(t,e)}throw Dt(t)}function Bt(t,e){return e?zt(t,e):Wt(t)}function Wt(t){if(t instanceof dt)return t;if(null!=t){if($t(t))return s=t,new dt((function(t){var e=s[lt]();if(G(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(qt(t))return Jt(t);if(jt(t))return o=t,new dt((function(t){o.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,it)}));if(Vt(t))return r=t,new dt((function(t){(function(t,e){var r,o,s,a;return n(this,void 0,void 0,(function(){var n,u;return i(this,(function(i){switch(i.label){case 0:i.trys.push([0,5,6,11]),r=c(t),i.label=1;case 1:return[4,r.next()];case 2:if((o=i.sent()).done)return[3,4];n=o.value,e.next(n),i.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=i.sent(),s={error:u},[3,11];case 6:return i.trys.push([6,,9,10]),o&&!o.done&&(a=r.return)?[4,a.call(r)]:[3,8];case 7:i.sent(),i.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}}))}))})(r,t).catch((function(e){return t.error(e)}))}));if(Ft(t))return e=t,new dt((function(t){for(var r=e[Ht]();!t.closed;){var n=r.next(),i=n.done,o=n.value;i?t.complete():t.next(o)}return function(){return G(null==r?void 0:r.return)&&r.return()}}))}var e,r,o,s;throw Dt(t)}function Jt(t){return new dt((function(e){for(var r=0;r<t.length&&!e.closed;r++)e.next(t[r]);e.complete()}))}function Yt(t,e){return e?Rt(t,e):Jt(t)}function Gt(t){return t&&G(t.schedule)}function Kt(t){return t[t.length-1]}function Xt(t){return G(Kt(t))?t.pop():void 0}function Qt(t){return Gt(Kt(t))?t.pop():void 0}function Zt(t,e){return"number"==typeof Kt(t)?t.pop():e}function te(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Qt(t);return r?Rt(t,r):Yt(t)}function ee(t,e){return vt((function(r,n){var i=0;r.subscribe(new mt(n,(function(r){n.next(t.call(e,r,i++))})))}))}var re=Array.isArray;function ne(t){return ee((function(e){return function(t,e){return re(e)?t.apply(void 0,e):t(e)}(t,e)}))}function ie(t,e){return void 0===e&&(e=0),vt((function(r,n){r.subscribe(new mt(n,(function(r){return n.add(t.schedule((function(){return n.next(r)}),e))}),(function(r){return n.add(t.schedule((function(){return n.error(r)}),e))}),(function(){return n.add(t.schedule((function(){return n.complete()}),e))})))}))}function oe(t,e,r){return void 0===r&&(r=1/0),G(e)?oe((function(r,n){return ee((function(t,i){return e(r,t,n,i)}))(Wt(t(r,n)))}),r):("number"==typeof e&&(r=e),vt((function(e,n){return function(t,e,r,n,i,o,s,c){var a=[],u=0,l=0,h=!1,p=function(){!h||a.length||u||e.complete()},d=function(t){return u<n?f(t):a.push(t)},f=function(t){o&&e.next(t),u++,Wt(r(t,l++)).subscribe(new mt(e,(function(t){null==i||i(t),o?d(t):e.next(t)}),void 0,(function(){u--;for(var t=function(){var t=a.shift();s?e.add(s.schedule((function(){return f(t)}))):f(t)};a.length&&u<n;)t();p()})))};return t.subscribe(new mt(e,d,void 0,(function(){h=!0,p()}))),function(){a=null,null==c||c()}}(e,n,t,r)})))}var se=oe;function ce(t){return void 0===t&&(t=1/0),oe(ht,t)}function ae(){return ce(1)}function ue(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ae()(Yt(t,Qt(t)))}function le(t){return new dt((function(e){Wt(t()).subscribe(e)}))}var he=["addListener","removeListener"],pe=["addEventListener","removeEventListener"],de=["on","off"];function fe(t,e,r,n){if(G(r)&&(n=r,r=void 0),n)return fe(t,e,r).pipe(ne(n));var i=function(t){return G(t.addEventListener)&&G(t.removeEventListener)}(t)?pe.map((function(n){return function(i){return t[n](e,i,r)}})):function(t){return G(t.addListener)&&G(t.removeListener)}(t)?he.map(ye(t,e)):function(t){return G(t.on)&&G(t.off)}(t)?de.map(ye(t,e)):[],o=i[0],s=i[1];return!o&&qt(t)?oe((function(t){return fe(t,e,r)}))(Yt(t)):new dt((function(t){if(!o)throw new TypeError("Invalid event target");var e=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.next(1<e.length?e:e[0])};return o(e),function(){return s(e)}}))}function ye(t,e){return function(r){return function(n){return t[r](e,n)}}}function ve(t,e,r){void 0===t&&(t=0),void 0===r&&(r=Mt);var n=-1;return null!=e&&(Gt(e)?r=e:n=e),new dt((function(e){var i,o=(i=t)instanceof Date&&!isNaN(i)?+t-r.now():t;o<0&&(o=0);var s=0;return r.schedule((function(){e.closed||(e.next(s++),0<=n?this.schedule(void 0,n):e.complete())}),o)}))}var me=Array.isArray;function be(t){return 1===t.length&&me(t[0])?t[0]:t}function we(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Qt(t),n=Zt(t,1/0);return(t=be(t)).length?1===t.length?Wt(t[0]):ce(n)(Yt(t,r)):Ot}var ge=new dt(ot);function Se(t,e){return vt((function(r,n){var i=0;r.subscribe(new mt(n,(function(r){return t.call(e,r,i++)&&n.next(r)})))}))}function _e(t){return vt((function(e,r){var n,i=null,o=!1;i=e.subscribe(new mt(r,void 0,(function(s){n=Wt(t(s,_e(t)(e))),i?(i.unsubscribe(),i=null,n.subscribe(r)):o=!0}))),o&&(i.unsubscribe(),i=null,n.subscribe(r))}))}function xe(t,e){void 0===e&&(e=Ut);var r,n=ve(t,e);return r=function(){return n},vt((function(t,e){var n=!1,i=null,o=null,s=function(){if(null==o||o.unsubscribe(),o=null,n){n=!1;var t=i;i=null,e.next(t)}};t.subscribe(new mt(e,(function(t){null==o||o.unsubscribe(),n=!0,i=t,o=new mt(e,s,void 0,s),Wt(r(t)).subscribe(o)}),void 0,(function(){s(),e.complete()}),(function(){i=o=null})))}))}function Pe(t,e){return t===e}function Ee(t){return vt((function(e,r){e.subscribe(new mt(r,(function(){return r.next(t)})))}))}function Ae(){return new _t}function Ce(){return function(t){return bt()((n=G(e=Ae)?e:function(){return e},G(r)?vt((function(t,e){var i=n();r(i).subscribe(e).add(t.subscribe(i))})):function(t){var e=new wt(t,n);return yt(t)&&(e.lift=t.lift),e.source=t,e.subjectFactory=n,e})(t));var e,r,n}}function Ne(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Qt(t);return vt((function(e,n){(r?ue(t,e,r):ue(t,e)).subscribe(n)}))}function Te(t,e){return vt((function(r,n){var i=null,o=0,s=!1,c=function(){return s&&!i&&n.complete()};r.subscribe(new mt(n,(function(r){null==i||i.unsubscribe();var s=0,a=o++;Wt(t(r,a)).subscribe(i=new mt(n,(function(t){return n.next(e?e(r,t,a,s++):t)}),void 0,(function(){i=null,c()})))}),void 0,(function(){s=!0,c()})))}))}function ke(t,e,r){var n=G(t)||e||r?{next:t,error:e,complete:r}:t;return n?vt((function(t,e){t.subscribe(new mt(e,(function(t){var r;null===(r=n.next)||void 0===r||r.call(n,t),e.next(t)}),(function(t){var r;null===(r=n.error)||void 0===r||r.call(n,t),e.error(t)}),(function(){var t;null===(t=n.complete)||void 0===t||t.call(n),e.complete()})))})):ht}function Ue(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Xt(t);return vt((function(e,n){var i=t.length,o=new Array(i),c=t.map((function(){return!1})),a=!1;e.subscribe(new mt(n,(function(t){if(a){var e=s([t],o);n.next(r?r.apply(void 0,e):e)}})));for(var u=function(e){Wt(t[e]).subscribe(new mt(n,(function(t){o[e]=t,a||c[e]||(c[e]=!0,(a=c.every(ht))&&(c=null))}),void 0,ot))},l=0;l<i;l++)u(l)}))}class Me extends Y{constructor(){super(...arguments),this.$connected=new _t}connectedCallback(){super.connectedCallback(),this.$connected.next(!0)}disconnectedCallback(){super.disconnectedCallback(),this.$connected.next(!1)}firstUpdated(){this.firstUpdate=!0}updated(t){if(!this.firstUpdate)for(const e of t.keys())e in this.$&&this.$[e].next(this[e]);this.firstUpdate=!1}fireEvent(t,e){this.dispatchEvent(new CustomEvent(t,e)),this.dispatchEvent(new CustomEvent(`${this.tagName.toLowerCase()}-${t}`,e))}}function Ie(){const t=document.documentElement,e=document.body,r="scrollHeight";return t[r]||e[r]}function Le(){return window.pageYOffset||document.body.scrollTop}const Oe=(t,e)=>(t.matches||t.msMatchesSelector).call(t,e);var Re;function qe({protocol:t,host:e},r=window.location){return t!==r.protocol||e!==r.host}function je(t){return t&&""===t.target}function He({url:t,anchor:e},r){return je(e)&&!qe(t,r)&&!function({hash:t,origin:e,pathname:r},n=window.location){return""!==t&&e===n.origin&&r===n.pathname}(t,r)}function $e({cause:t,url:{pathname:e,hash:r},oldURL:{pathname:n}}){return e===n&&(t===Re.Pop||t===Re.Push&&""!==r)}!function(t){t.Init="init",t.Hint="hint",t.Push="push",t.Pop="pop"}(Re||(Re={}));class Fe{constructor(t){this.parent=t}fetchPage(t){return(e=t.url.href,r={method:"GET",mode:"cors",headers:{Accept:"text/html"}},dt.create((t=>{const n=new AbortController,{signal:i}=n;let o=null;return fetch(e,{...r,signal:i}).then((e=>{o=e,t.next(e),t.complete()})).catch((e=>t.error(e))),()=>{o||n.abort()}}))).pipe(Te((t=>t.text())),ee((e=>({...t,responseText:e}))),_e((e=>te({...t,error:e,responseText:null}))));var e,r}selectPrefetch({href:t},e,r){return t===e.url.href?te(e):r.pipe((n=1)<=0?function(){return Ot}:vt((function(t,e){var r=0;t.subscribe(new mt(e,(function(t){++r<=n&&(e.next(t),n<=r&&e.complete())})))})));var n}getResponse(t,e,r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Xt(t);return(t=be(t)).length?new dt((function(e){var n=t.map((function(){return[]})),i=t.map((function(){return!1}));e.add((function(){n=i=null}));for(var o=function(o){Wt(t[o]).subscribe(new mt(e,(function(t){if(n[o].push(t),n.every((function(t){return t.length}))){var s=n.map((function(t){return t.shift()}));e.next(r?r.apply(void 0,s):s),n.some((function(t,e){return!t.length&&i[e]}))&&e.complete()}}),void 0,(function(){i[o]=!0,!n[o].length&&e.complete()})))},s=0;!e.closed&&s<t.length;s++)o(s);return function(){n=i=null}})):Ot}(this.selectPrefetch(e.url,r,t),this.parent.animPromise).pipe(ee((([t])=>({...t,...e}))))}}class Ve{constructor(t){this.parent=t}get scriptSelector(){return this.parent.scriptSelector}removeScriptTags(t){const e=[];return t.forEach((t=>{null!=t&&t.querySelectorAll(this.scriptSelector).forEach((t=>{const r=[function(t){const e=document.createElement("script");return Array.from(t.attributes).forEach((t=>e.setAttributeNode(t.cloneNode()))),e.innerHTML=t.innerHTML,e}(t),t];e.push(r)}))})),e}reinsertScriptTags(t){if(!this.scriptSelector)return Promise.resolve(t);const{scripts:e}=t,r=document.write;return Bt(e).pipe((i=t=>this.insertScript(t),G(o)?oe(i,o,1):oe(i,1)),_e((e=>te({...t,error:e}))),(n=()=>document.write=r,vt((function(t,e){t.subscribe(e),e.add(n)}))),Ee(t)).toPromise();var n,i,o}insertScript([t,e]){return document.write=(...t)=>{const r=document.createElement("div");r.innerHTML=t.join(),Array.from(r.childNodes).forEach((t=>e.parentNode.insertBefore(t,e)))},new Promise(((r,n)=>{""!==t.src?(t.addEventListener("load",r),t.addEventListener("error",n),e.parentNode.replaceChild(t,e)):(e.parentNode.replaceChild(t,e),r({}))}))}}function De(t,e){t.forEach((t=>{t.querySelectorAll("[href]").forEach(ze("href",e)),t.querySelectorAll("[src]").forEach(ze("src",e)),t.querySelectorAll("img[srcset]").forEach(function(t,e){return r=>{try{r.setAttribute(t,r.getAttribute(t).split(/\s*,\s*/).map((t=>{const r=t.split(/\s+/);return r[0]=new URL(r[0],e).href,r.join(" ")})).join(", "))}catch(t){}}}("srcset",e)),t.querySelectorAll("blockquote[cite]").forEach(ze("cite",e)),t.querySelectorAll("del[cite]").forEach(ze("cite",e)),t.querySelectorAll("ins[cite]").forEach(ze("cite",e)),t.querySelectorAll("q[cite]").forEach(ze("cite",e)),t.querySelectorAll("img[longdesc]").forEach(ze("longdesc",e)),t.querySelectorAll("frame[longdesc]").forEach(ze("longdesc",e)),t.querySelectorAll("iframe[longdesc]").forEach(ze("longdesc",e)),t.querySelectorAll("img[usemap]").forEach(ze("usemap",e)),t.querySelectorAll("input[usemap]").forEach(ze("usemap",e)),t.querySelectorAll("object[usemap]").forEach(ze("usemap",e)),t.querySelectorAll("form[action]").forEach(ze("action",e)),t.querySelectorAll("button[formaction]").forEach(ze("formaction",e)),t.querySelectorAll("input[formaction]").forEach(ze("formaction",e)),t.querySelectorAll("video[poster]").forEach(ze("poster",e)),t.querySelectorAll("object[data]").forEach(ze("data",e)),t.querySelectorAll("object[codebase]").forEach(ze("codebase",e)),t.querySelectorAll("object[archive]").forEach(function(t,e){return r=>{try{r.setAttribute(t,r.getAttribute(t).split(/[\s,]+/).map((t=>new URL(t,e).href)).join(", "))}catch(t){}}}("archive",e))}))}function ze(t,e){return r=>{try{r.setAttribute(t,new URL(r.getAttribute(t),e).href)}catch(t){}}}class Be{constructor(t){this.parent=t,this.scriptManager=new Ve(t)}get el(){return this.parent.el}get replaceSelector(){return this.parent.replaceSelector}get scriptSelector(){return this.parent.scriptSelector}getReplaceElements(t){if(this.replaceSelector)return this.replaceSelector.split(",").map((e=>t.querySelector(e)));if(this.el.id)return[t.getElementById(this.el.id)];{const e=Array.from(document.getElementsByTagName(this.el.tagName)).indexOf(this.el);return[t.getElementsByTagName(this.el.tagName)[e]]}}responseToContent(t){const{responseText:e}=t,r=(new DOMParser).parseFromString(e,"text/html"),{title:n=""}=r,i=this.getReplaceElements(r);if(i.every((t=>null==t)))throw new Error(`Couldn't find any element in the document at '${location}'.`);const o=this.scriptSelector?this.scriptManager.removeScriptTags(i):[];return{...t,document:r,title:n,replaceEls:i,scripts:o}}replaceContentWithSelector(t){this.replaceSelector.split(",").map((t=>document.querySelector(t))).forEach(((e,r)=>e.parentNode.replaceChild(t[r],e)))}replaceContentWholesale([t]){this.el.innerHTML=t.innerHTML}replaceContent(t){this.replaceSelector?this.replaceContentWithSelector(t):this.replaceContentWholesale(t)}replaceHead(t){const{head:e}=this.el.ownerDocument,r=e.querySelector("link[rel=canonical]"),n=t.head.querySelector("link[rel=canonical]");r&&n&&(r.href=n.href);const i=e.querySelector("meta[name=description]"),o=t.head.querySelector("meta[name=description]");i&&o&&(i.content=o.content)}updateDOM(t){try{const{replaceEls:e,document:r}=t;qe(this.parent)&&De(e,this.parent.href),this.replaceHead(r),this.replaceContent(e)}catch(e){throw{...t,error:e}}}reinsertScriptTags(t){return this.scriptManager.reinsertScriptTags(t)}}const We=t=>Array.prototype.concat.apply([],t),Je=t=>({addedNodes:new Set(We(t.map((t=>Array.from(t.addedNodes))))),removedNodes:new Set(We(t.map((t=>Array.from(t.removedNodes)))))});class Ye{setupEventListeners(){const t=fe(this.el,"click").pipe(ee((t=>{const e=function(t,e){let r=t;for(;null!=r;){if(Oe(r,e))return r;r=r.parentNode instanceof Element?r.parentNode:null}return null}(t.target,this.linkSelector);if(e instanceof HTMLAnchorElement)return[t,e]})),Se((t=>!!t))),e=(t,e)=>t.matches(e)?te(t):Bt(t.querySelectorAll(e));return{hintEvent$:this.$.linkSelector.pipe(Te((t=>{const r=new Map,n=t=>{r.has(t)||r.set(t,(t=>we(fe(t,"mouseenter",{passive:!0}),fe(t,"touchstart",{passive:!0}),fe(t,"focus",{passive:!0})).pipe(ee((e=>[e,t]))))(t))},i=t=>{r.delete(t)};return(s=this.el,c={childList:!0,subtree:!0},dt.create((t=>{const e=new MutationObserver((e=>e.forEach((e=>t.next(e)))));return e.observe(s,c),()=>{e.disconnect()}}))).pipe(Ne({addedNodes:[this.el],removedNodes:[]}),function(t=0){return e=>{let r=[];return e.pipe(ke((t=>r.push(t))),xe(t),ee((()=>r)),ke((()=>r=[])))}}(500),ee(Je),Te((({addedNodes:o,removedNodes:s})=>(Bt(s).pipe(Se((t=>t instanceof Element)),se((r=>e(r,t))),ke(i)).subscribe(),Bt(o).pipe(Se((t=>t instanceof Element)),se((r=>e(r,t))),ke(n)).subscribe(),Bt(r.values()).pipe(ce())))),(o=this.$.prefetch,t=>o.pipe(Te((e=>e?t:ge)))));var o,s,c}))),pushEvent$:t}}}const Ge=t=>new Promise((e=>setTimeout(e,t)));class Ke{constructor(t){this.parent=t}onStart(t){this.parent.animPromise=Ge(this.parent.duration);this.parent.fireEvent("start",{detail:{...t,transitionUntil:t=>{this.parent.animPromise=Promise.all([this.parent.animPromise,t])}}})}emitDOMError(t){process.env.DEBUG&&console.error(t);const e=location.href;window.history.back(),setTimeout((()=>document.location.assign(e)),100)}emitNetworkError(t){process.env.DEBUG&&console.error(t),this.parent.fireEvent("networkerror",{detail:t})}emitError(t){process.env.DEBUG&&console.error(t),this.parent.fireEvent("error",{detail:t})}emitReady(t){this.parent.fireEvent("ready",{detail:t})}emitAfter(t){this.parent.fadePromise=Ge(this.parent.duration);this.parent.fireEvent("after",{detail:{...t,transitionUntil:t=>{this.parent.fadePromise=Promise.all([this.parent.fadePromise,t])}}})}emitProgress(t){this.parent.fireEvent("progress",{detail:t})}emitLoad(t){this.parent.fireEvent("load",{detail:t})}}window.HashChangeEvent=window.HashChangeEvent||function(t,{oldURL:e="",newURL:r=""}={}){const n=new CustomEvent(t);return n.oldURL=e,n.newURL=r,n};class Xe{constructor(t){this.updateHistoryScrollPosition=()=>{if(qe(this.parent))return;const t=this.assignScrollPosition(history.state||{});history.replaceState(t,document.title)},this.parent=t}updateHistoryState({cause:t,replace:e,url:r,oldURL:n}){if(!qe(this.parent))switch(t){case Re.Init:case Re.Push:{const{histId:t}=this.parent;if(e||r.href===location.href){const e={...history.state,[t]:{}};history.replaceState(e,document.title,r.href)}else history.pushState({[t]:{}},document.title,r.href)}case Re.Pop:this.parent.simulateHashChange&&function(t,e){t.hash!==e.hash&&window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:t.href,oldURL:e.href}))}(r,n)}}updateTitle({cause:t,title:e}){document.title=e,qe(this.parent)||t!==Re.Push||history.replaceState(history.state,e)}assignScrollPosition(t){const{histId:e}=this.parent;return{...t,[e]:{...t[e],scrollTop:Le(),scrollHeight:Ie()}}}}class Qe{constructor(t){this.parent=t,"scrollRestoration"in history&&(history.scrollRestoration="manual")}manageScrollPosition({cause:t,url:{hash:e}}){switch(t){case Re.Push:this.scrollHashIntoView(e,{behavior:"smooth",block:"start",inline:"nearest"});break;case Re.Pop:this.restoreScrollPosition();break;case Re.Init:this.restoreScrollPositionOnReload()}}elementFromHash(t){return document.getElementById(decodeURIComponent(t.substr(1)))}scrollHashIntoView(t,e){if(t){const r=this.elementFromHash(t);r&&r.scrollIntoView(e)}else window.scroll(window.pageXOffset,0)}restoreScrollPosition(){const{histId:t}=this.parent,{scrollTop:e}=history.state&&history.state[t]||{};null!=e&&window.scroll(window.pageXOffset,e)}restoreScrollPositionOnReload(){const{histId:t}=this.parent;history.state&&history.state[t]&&0===Le()?this.restoreScrollPosition():location.hash&&requestAnimationFrame((()=>this.scrollHashIntoView(location.hash,!0)))}}let Ze=class extends(function(t,e){return e.forEach((e=>{Object.getOwnPropertyNames(e.prototype).forEach((r=>{t.prototype[r]=e.prototype[r]}))})),t}(Me,[Ye])){constructor(){super(...arguments),this.el=this,this.linkSelector="a[href]:not([data-no-push])",this.prefetch=!1,this.duration=0,this.simulateHashChange=!1,this.baseURL=window.location.href,this._initialized=function(){let t,e;const r=new Promise(((r,n)=>(t=r,e=n)));return r.resolve=t,r.reject=e,r}(),this.$={},this.fadePromise=Promise.resolve(null),this.scrollManager=new Qe(this),this.historyManager=new Xe(this),this.fetchManager=new Fe(this),this.updateManager=new Be(this),this.eventManager=new Ke(this),this._url=new URL(this.baseURL),this.reload$=new _t,this.cacheNr=0,this.upgrade=()=>{const{pushEvent$:t,hintEvent$:e}=this.setupEventListeners(),r={},n=we(t.pipe(ee((([t,e])=>({cause:Re.Push,url:new URL(e.href,this.href),anchor:e,event:t,cacheNr:this.cacheNr}))),Se((t=>function({url:t,anchor:e,event:{metaKey:r,ctrlKey:n}},i){return!r&&!n&&je(e)&&!qe(t,i)}(t,this))),ke((({event:t})=>{t.preventDefault(),this.historyManager.updateHistoryScrollPosition()}))),fe(window,"popstate").pipe(Se((()=>window.history.state&&window.history.state[this.histId])),ee((t=>({cause:Re.Pop,url:new URL(window.location.href),cacheNr:this.cacheNr,event:t})))),this.reload$).pipe(Ne({url:new URL(window.location.href)}),vt((function(t,e){var r,n=!1;t.subscribe(new mt(e,(function(t){var i=r;r=t,n&&e.next([i,t]),n=!0})))})),ee((([t,e])=>Object.assign(e,{oldURL:t.url}))),Ce()),i=n.pipe(Se((t=>!$e(t))),Ce()),o=n.pipe(Se((t=>$e(t))),Se((()=>history.state&&history.state[this.histId])),ie(Lt),ke((t=>{this.historyManager.updateHistoryState(t),this.scrollManager.manageScrollPosition(t)}))),s=le((()=>we(i.pipe(Ee(!0)),r.response$.pipe(Ee(!1))))).pipe(Ne(!1)),c=we(e.pipe(function(t,...e){return r=>0===e.length?r.pipe(Ue(t),Se((([,t])=>t)),ee((([t])=>t))):r.pipe(Ue(t,...e),Se((([,...t])=>t.every((t=>t)))),ee((([t])=>t)))}(s.pipe(ee((t=>!t)))),ee((([t,e])=>({cause:Re.Hint,url:new URL(e.href,this.href),anchor:e,event:t,cacheNr:this.cacheNr}))),Se((t=>He(t,this)))),i).pipe((a=null!=(a=(t,e)=>this.compareContext(t,e))?a:Pe,vt((function(t,e){var r,n=!0;t.subscribe(new mt(e,(function(t){(n&&(r=t,1)||!a(r,r=u?u(t):t))&&e.next(t),n=!1})))}))),Te((t=>this.fetchManager.fetchPage(t))),Ne({url:{}}),Ce());var a,u;const l=r.response$=i.pipe(ke((t=>{this.eventManager.onStart(t),this.historyManager.updateHistoryState(t),this._url=t.url})),Ue(c),Te((t=>this.fetchManager.getResponse(c,...t))),Ce()),h=l.pipe(Se((({error:t})=>!t))),p=l.pipe(Se((({error:t})=>!!t))),d=h.pipe(ee((t=>this.updateManager.responseToContent(t))),ke((t=>this.eventManager.emitReady(t))),ie(Lt),ke((t=>{this.updateManager.updateDOM(t),this.historyManager.updateTitle(t),this.eventManager.emitAfter(t)})),Ne({cause:Re.Init,url:this._url,scripts:[]}),ie(Lt),ke((t=>this.scrollManager.manageScrollPosition(t))),ke({error:t=>this.eventManager.emitDOMError(t)}),_e(((t,e)=>e)),Te((t=>this.fadePromise.then((()=>t)))),Te((t=>this.updateManager.reinsertScriptTags(t))),ke({error:t=>this.eventManager.emitError(t)}),_e(((t,e)=>e)),ke((t=>this.eventManager.emitLoad(t)))),f=p.pipe(ke((t=>this.eventManager.emitNetworkError(t)))),y=i.pipe(Te((t=>{return le((()=>this.animPromise)).pipe((e=l,vt((function(t,r){Wt(e).subscribe(new mt(r,(function(){return r.complete()}),void 0,ot)),!r.closed&&t.subscribe(r)}))),Ee(t));var e})),ke((t=>this.eventManager.emitProgress(t))));d.subscribe(),o.subscribe(),f.subscribe(),y.subscribe(),this._initialized.resolve(this),this.fireEvent("init")}}createRenderRoot(){return this}get initialized(){return this._initialized}_setLocation(t,e){const r=new URL(this._url.href);r[t]=e,this.assign(r.href)}get hash(){return this._url.hash}get host(){return this._url.host}get hostname(){return this._url.hostname}get href(){return this._url.href}get pathname(){return this._url.pathname}get port(){return this._url.port}get protocol(){return this._url.protocol}get search(){return this._url.search}get origin(){return this._url.origin}get ancestorOrigins(){return window.location.ancestorOrigins}set hash(t){this._setLocation("hash",t)}set host(t){this._setLocation("host",t)}set hostname(t){this._setLocation("hostname",t)}set href(t){this._setLocation("href",t)}set pathname(t){this._setLocation("pathname",t)}set port(t){this._setLocation("port",t)}set protocol(t){this._setLocation("protocol",t)}set search(t){this._setLocation("search",t)}set origin(t){}set ancestorOrigins(t){}get histId(){return this.id||this.tagName}assign(t){this.reload$.next({cause:Re.Push,url:new URL(t,this.href),cacheNr:++this.cacheNr})}reload(){this.reload$.next({cause:Re.Push,url:new URL(this.href),cacheNr:++this.cacheNr,replace:!0})}replace(t){this.reload$.next({cause:Re.Push,url:new URL(t,this.href),cacheNr:++this.cacheNr,replace:!0})}compareContext(t,e){return t.url.href===e.url.href&&t.error===e.error&&t.cacheNr===e.cacheNr}connectedCallback(){super.connectedCallback(),this.$.linkSelector=new Pt(this.linkSelector),this.$.prefetch=new Pt(this.prefetch),window.addEventListener("beforeunload",this.historyManager.updateHistoryScrollPosition),this.updateComplete.then(this.upgrade)}disconnectedCallback(){window.removeEventListener("beforeunload",this.historyManager.updateHistoryScrollPosition)}};var tr;r([D({type:String,reflect:!0,attribute:"replace-selector"})],Ze.prototype,"replaceSelector",void 0),r([D({type:String,reflect:!0,attribute:"link-selector"})],Ze.prototype,"linkSelector",void 0),r([D({type:String,reflect:!0,attribute:"script-selector"})],Ze.prototype,"scriptSelector",void 0),r([D({type:Boolean,reflect:!0,attribute:"prefetch"})],Ze.prototype,"prefetch",void 0),r([D({type:Number,reflect:!0,attribute:"duration"})],Ze.prototype,"duration",void 0),r([D({type:Boolean,reflect:!0,attribute:"hashchange"})],Ze.prototype,"simulateHashChange",void 0),r([D({type:String})],Ze.prototype,"baseURL",void 0),r([D()],Ze.prototype,"assign",null),r([D()],Ze.prototype,"reload",null),r([D()],Ze.prototype,"replace",null),Ze=r([(tr="hy-push-state",t=>"function"==typeof t?((t,e)=>(window.customElements.define(t,e),e))(tr,t):((t,e)=>{const{kind:r,elements:n}=e;return{kind:r,elements:n,finisher(e){window.customElements.define(t,e)}}})(tr,t))],Ze);export{Ze as HyPushState};
//# sourceMappingURL=hy-push-state.js.map
