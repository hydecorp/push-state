{"version":3,"file":"common.js","sourceRoot":"","sources":["../src/common.ts"],"names":[],"mappings":"AAAA,OAAO,EACL,WAAW,EACX,aAAa,EACb,eAAe,EACf,UAAU,EACV,kBAAkB,EAClB,OAAO,EACP,kBAAkB,EAClB,wBAAwB,EACxB,eAAe,EACf,aAAa,EACb,YAAY,EACZ,OAAO,EACP,gBAAgB,EACjB,MAAM,qBAAqB,CAAC;AAE7B,MAAM,CAAN,IAAY,KAKX;AALD,WAAY,KAAK;IACf,sBAAa,CAAA;IACb,sBAAa,CAAA;IACb,sBAAa,CAAA;IACb,oBAAW,CAAA;AACb,CAAC,EALW,KAAK,KAAL,KAAK,QAKhB;AAAA,CAAC;AAgBF,MAAM,UAAU,UAAU,CACxB,GAA+C,EAC/C,WAA+C,MAAM,CAAC,QAAQ;IAE9D,OAAO,GAAG,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC,QAAQ,KAAK,QAAQ,CAAC,QAAQ,IAAI,GAAG,CAAC,IAAI,KAAK,QAAQ,CAAC,IAAI,CAAC,CAAC;AAC3F,CAAC;AAED,MAAM,UAAU,MAAM,CACpB,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAsD,EAC9E,WAA+D,MAAM,CAAC,QAAQ;IAE9E,OAAO,IAAI,KAAK,EAAE,IAAI,MAAM,KAAK,QAAQ,CAAC,MAAM,IAAI,QAAQ,KAAK,QAAQ,CAAC,QAAQ,CAAC;AACrF,CAAC;AAED,MAAM,UAAU,gBAAgB,CAAC,MAAiC;IAChE,OAAO,MAAM,IAAI,MAAM,CAAC,MAAM,KAAK,EAAE,CAAC;AACxC,CAAC;AAED,MAAM,UAAU,WAAW,CAAC,EAAE,GAAG,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,OAAO,EAAE,EAAgB,EAAE,QAAkB;IACxG,OAAO,CAAC,CAAC,CACP,CAAC,OAAO;QACR,CAAC,OAAO;QACR,gBAAgB,CAAC,MAAM,CAAC;QACxB,CAAC,UAAU,CAAC,GAAG,EAAE,QAAQ,CAAC,CAC3B,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,WAAW,CAAC,EAAE,GAAG,EAAE,MAAM,EAAW,EAAE,QAAkB;IACtE,OAAO,CAAC,CAAC,CACP,gBAAgB,CAAC,MAAM,CAAC;QACxB,CAAC,UAAU,CAAC,GAAG,EAAE,QAAQ,CAAC;QAC1B,CAAC,MAAM,CAAC,GAAG,EAAE,QAAQ,CAAC,CACvB,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,YAAY,CAAC,EAC3B,KAAK,EACL,GAAG,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,EACvB,MAAM,GACE;IACR,OAAO,QAAQ,MAAK,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,QAAQ,CAAA,IAAI,CAAC,KAAK,KAAK,KAAK,CAAC,GAAG,IAAI,CAAC,KAAK,KAAK,KAAK,CAAC,IAAI,IAAI,IAAI,KAAK,EAAE,CAAC,CAAC,CAAC;AACzG,CAAC","sourcesContent":["export {\n  applyMixins,\n  subscribeWhen,\n  unsubscribeWhen,\n  filterWhen,\n  bufferDebounceTime,\n  fetchRx,\n  fragmentFromString,\n  createMutationObservable,\n  getScrollHeight,\n  getScrollLeft,\n  getScrollTop,\n  matches,\n  matchesAncestors\n} from '@hydecorp/component';\n\nexport enum Cause {\n  Init = \"init\",\n  Hint = \"hint\",\n  Push = \"push\",\n  Pop = \"pop\",\n};\n\nexport interface Context {\n  cause: Cause,\n  url: URL,\n  oldURL?: URL,\n  cacheNr?: number,\n  replace?: boolean,\n  error?: any,\n  anchor?: HTMLAnchorElement,\n}\n\nexport interface ClickContext extends Context {\n  event: MouseEvent,\n}\n\nexport function isExternal(\n  url?: { protocol: string, host: string } | null,\n  location: { protocol: string, host: string } = window.location,\n) {\n  return url != null && (url.protocol !== location.protocol || url.host !== location.host);\n}\n\nexport function isHash(\n  { hash, origin, pathname }: { hash: string, origin: string, pathname: string },\n  location: { hash: string, origin: string, pathname: string } = window.location,\n) {\n  return hash !== \"\" && origin === location.origin && pathname === location.pathname;\n}\n\nexport function shouldLoadAnchor(anchor?: HTMLAnchorElement | null) {\n  return anchor && anchor.target === \"\";\n}\n\nexport function isPushEvent({ url, anchor, event: { metaKey, ctrlKey } }: ClickContext, location: Location) {\n  return !!(\n    !metaKey &&\n    !ctrlKey &&\n    shouldLoadAnchor(anchor) &&\n    !isExternal(url, location)\n  );\n}\n\nexport function isHintEvent({ url, anchor }: Context, location: Location) {\n  return !!(\n    shouldLoadAnchor(anchor) &&\n    !isExternal(url, location) &&\n    !isHash(url, location)\n  );\n}\n\nexport function isHashChange({\n  cause,\n  url: { pathname, hash },\n  oldURL,\n}: Context) {\n  return pathname === oldURL?.pathname && (cause === Cause.Pop || (cause === Cause.Push && hash !== ''));\n}\n"]}